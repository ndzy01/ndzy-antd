/*! For license information please see npm.md-editor-rt.8c190e7e.js.LICENSE.txt */
"use strict";(self.webpackChunkndzy_antd=self.webpackChunkndzy_antd||[]).push([["5139"],{8351:function(){},492:function(e,t,l){l.d(t,{Z:function(){return c}});var r=l(8771),o=l(7294),n=l(716),i=l(1282),a=l(3062);let s=(e,t)=>{let{editorId:l}=e;(0,o.useImperativeHandle)(t,()=>({rerender(){i.b.emit(l,i.R)}}),[])},c=(0,o.forwardRef)((e,t)=>{let{modelValue:l=a.f.modelValue,theme:c=a.f.theme,className:d=a.f.className,editorId:u=(0,i.g)(a.g+"_"),showCodeRowNumber:m=a.f.showCodeRowNumber,previewTheme:p=a.f.previewTheme,noMermaid:h=a.f.noMermaid,noKatex:g=a.f.noKatex,onHtmlChanged:f=a.f.onHtmlChanged,onGetCatalog:b=a.f.onGetCatalog,sanitize:v=a.f.sanitize,mdHeadingId:x=a.f.mdHeadingId,noIconfont:j=a.f.noIconfont,noHighlight:k=a.f.noHighlight,noImgZoomIn:$=a.f.noImgZoomIn,language:w=a.f.language,sanitizeMermaid:C=a.f.sanitizeMermaid,codeFoldable:y=a.f.codeFoldable,autoFoldThreshold:T=a.f.autoFoldThreshold}=e,[E]=(0,o.useState)(()=>({editorId:u,noKatex:g,noMermaid:h,noIconfont:j,noHighlight:k}));(0,n.u)(E);let[N,I,S]=(0,n.b)(e);return s(E,t),(0,o.useEffect)(()=>()=>{i.b.clear(u)},[]),r.j.jsx(n.a.Provider,{value:{editorId:E.editorId,tabWidth:2,theme:c,language:w,highlight:N,showCodeRowNumber:m,usedLanguageText:I,previewTheme:p,customIcon:e.customIcon||{}},children:r.j.jsx("div",{id:E.editorId,className:(0,i.c)([a.p,d,"dark"===c&&`${a.p}-dark`,S.fullscreen||S.pageFullscreen?`${a.p}-fullscreen`:"",`${a.p}-previewOnly`]),style:e.style,children:r.j.jsx(n.C,{modelValue:l,setting:S,mdHeadingId:x,onHtmlChanged:f,onGetCatalog:b,sanitize:v,noMermaid:E.noMermaid,noHighlight:E.noHighlight,noKatex:E.noKatex,formatCopiedText:e.formatCopiedText,noImgZoomIn:$,previewOnly:!0,sanitizeMermaid:C,codeFoldable:y,autoFoldThreshold:T},"preview-only")})})})},716:function(e,t,l){l.d(t,{C:function(){return eQ},E:function(){return e4},a:function(){return e8},b:function(){return O},u:function(){return F}});var r=l(8771),o=l(7294),n=l(1282),i=l(3062),a=l(9199),s=l(1518),c=l(1673),d=l(8551),u=l(9348),m=l(129),p=l(3015),h=l(6644),g=l(3582),f=l(7841),b=l(2557),v=l(640),x=l(2835),j=l(5355),k=l(4651),$=l(7754),w=l(6240),C=l(3935),y=Object.defineProperty,T=(e,t,l)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,E=(e,t,l)=>(T(e,"symbol"!=typeof t?t+"":t,l),l);let N=(e,t)=>{let l=l=>{let r=e.parentElement||document.body,o=r.offsetWidth,n=r.offsetHeight,i=document.documentElement.clientWidth,a=document.documentElement.clientHeight,s=l.offsetX,c=l.offsetY,d=e=>{let l=e.x+document.body.scrollLeft-document.body.clientLeft-s,d=e.y+document.body.scrollTop-document.body.clientTop-c;l=l<1?1:l<i-o-1?l:i-o-1,d=d<1?1:d<a-n-1?d:a-n-1,t?t(l,d):(r.style.left=l+"px",r.style.top=d+"px")};document.addEventListener("mousemove",d);let u=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",l),()=>{e.removeEventListener("mousedown",l)}},I=(e,t,l="")=>{var r;let o=document.getElementById(t.id);if(o)""!==l&&(Reflect.get(window,l)?null==(r=t.onload)||r.call(o,new Event("load")):t.onload&&o.addEventListener("load",t.onload));else{let l={...t};l.onload=null;let r=M(e,l);t.onload&&r.addEventListener("load",t.onload),document.head.appendChild(r)}},S=(e,t)=>{let l=document.getElementById(t.id);null==l||l.remove(),I(e,t)},M=(e,t)=>{let l=document.createElement(e);return Object.keys(t).forEach(e=>{void 0!==t[e]&&(l[e]=t[e])}),l},L=(e,t)=>{let{modelValue:l}=e,{editorId:r}=t,[i,a]=(0,o.useState)({buildFinished:!1,html:""});(0,o.useEffect)(()=>{let e=e=>{a(()=>({buildFinished:!0,html:e}))};return n.b.on(r,{name:n.B,callback:e}),()=>{n.b.remove(r,n.B,e)}},[]),(0,o.useEffect)(()=>{let t=()=>{if(e.onSave){let t=new Promise(e=>{if(i.buildFinished)e(i.html);else{let t=l=>{e(l),n.b.remove(r,n.B,t)};n.b.on(r,{name:n.B,callback:t})}});e.onSave(e.modelValue,t)}};return n.b.on(r,{name:n.O,callback:t}),()=>{n.b.remove(r,n.O,t)}},[l,e,i.buildFinished,i.html]),(0,o.useEffect)(()=>{a(e=>({...e,buildFinished:!1}))},[l])},H=e=>{let{noPrettier:t,noUploadImg:l}=e;(0,o.useEffect)(()=>{let{editorExtensions:e,editorExtensionsAttrs:r}=i.h,o=t||!!e.prettier.prettierInstance,n=t||!!e.prettier.parserMarkdownInstance;if(!(l||e.cropper.instance)){let{js:t={},css:l={}}=r.cropper||{};I("link",{...l,rel:"stylesheet",href:e.cropper.css,id:`${i.p}-cropperCss`}),I("script",{...t,src:e.cropper.js,id:`${i.p}-cropper`})}if(!o){let{standaloneJs:t={}}=r.prettier||{};I("script",{...t,src:e.prettier.standaloneJs,id:`${i.p}-prettier`})}if(!n){let{parserMarkdownJs:t={}}=r.prettier||{};I("script",{...t,src:e.prettier.parserMarkdownJs,id:`${i.p}-prettierMD`})}},[]),F(e)},F=({noIconfont:e})=>{(0,o.useEffect)(()=>{let{editorExtensions:t,editorExtensionsAttrs:l,iconfontType:r}=i.h;e||("svg"===r?I("script",{...l.iconfont,src:t.iconfont,id:`${i.p}-icon`}):I("link",{...l.iconfontClass,rel:"stylesheet",href:t.iconfontClass,id:`${i.p}-icon-class`}))},[])},R=(e,t)=>{(0,o.useEffect)(()=>(n.b.on(e,{name:n.E,callback:t}),()=>{n.b.remove(e,n.E,t)}),[t])},A=(e,t)=>{let{editorId:l}=t;(0,o.useEffect)(()=>{let t=(t,r)=>{e.onUploadImg&&e.onUploadImg(t,e=>{n.b.emit(l,n.h,"image",{desc:"",urls:e}),r&&r()})};return n.b.on(l,{name:n.U,callback:t}),()=>{n.b.remove(l,n.U,t)}},[e.onUploadImg])},P=(e,t)=>{let{toolbars:l=i.b,toolbarsExclude:r=[]}=e,{editorId:a}=t,[s,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{n.b.on(a,{name:n.C,callback:e=>{c(void 0===e?e=>!e:e)}})},[]),(0,o.useMemo)(()=>!r.includes("catalog")&&l.includes("catalog")&&s,[s,l,r])},J="",O=e=>{let{theme:t=i.f.theme,preview:l=i.f.preview,htmlPreview:r=i.f.htmlPreview,pageFullscreen:n=i.f.pageFullscreen,previewTheme:a=i.f.previewTheme,codeTheme:s=i.f.codeTheme,language:c=i.f.language,codeStyleReverse:d=i.f.codeStyleReverse,codeStyleReverseList:u=i.f.codeStyleReverseList}=e,m=(0,o.useMemo)(()=>{let e=i.h.editorExtensions.highlight,l=i.h.editorExtensionsAttrs.highlight,{js:r}=e,o={...i.j,...e.css},{js:n,css:c={}}=l||{},m=d&&u.includes(a)?"dark":t,p=o[s]?o[s][m]:i.j.atom[m],h=o[s]&&c[s]?c[s][m]:c.atom?c.atom[m]:{};return{js:{src:r,...n},css:{href:p,...h}}},[d,u,a,t,s]),p=(0,o.useMemo)(()=>{let e={...i.s,...i.h.editorConfig.languageUserDefined};return e[c]?e[c]:i.s["zh-CN"]},[c]),[h,g]=(0,o.useState)({pageFullscreen:n,fullscreen:!1,preview:l,htmlPreview:!l&&r,previewOnly:!1}),f=(0,o.useCallback)((e,t)=>{g(l=>{let r={...l,[e]:void 0===t?!l[e]:t};return"preview"===e?(r.htmlPreview=!1,r.previewOnly=!1):"htmlPreview"===e?(r.preview=!1,r.previewOnly=!1):"previewOnly"!==e||r.preview||r.htmlPreview||(r.preview=!0),r})},[]);return(0,o.useEffect)(()=>{J=document.body.style.overflow},[]),(0,o.useEffect)(()=>{h.pageFullscreen||h.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=J},[h.pageFullscreen,h.fullscreen]),[m,p,h,f]},_=(e,t,l,r,i,a)=>{let{editorId:s}=t;(0,o.useEffect)(()=>{n.b.emit(s,n.P,r.pageFullscreen)},[r.pageFullscreen]),(0,o.useEffect)(()=>{n.b.emit(s,n.F,r.fullscreen)},[r.fullscreen]),(0,o.useEffect)(()=>{n.b.emit(s,n.a,r.preview)},[r.preview]),(0,o.useEffect)(()=>{n.b.emit(s,n.d,r.previewOnly)},[r.previewOnly]),(0,o.useEffect)(()=>{n.b.emit(s,n.H,r.htmlPreview)},[r.htmlPreview]),(0,o.useEffect)(()=>{n.b.emit(s,n.e,l)},[l]),(0,o.useImperativeHandle)(e,()=>({on(e,t){switch(e){case"pageFullscreen":n.b.on(s,{name:n.P,callback(e){t(e)}});break;case"fullscreen":n.b.on(s,{name:n.F,callback(e){t(e)}});break;case"preview":n.b.on(s,{name:n.a,callback(e){t(e)}});break;case"previewOnly":n.b.on(s,{name:n.d,callback(e){t(e)}});break;case"htmlPreview":n.b.on(s,{name:n.H,callback(e){t(e)}});break;case"catalog":n.b.on(s,{name:n.e,callback(e){t(e)}})}},togglePageFullscreen(e){i("pageFullscreen",e)},toggleFullscreen(e){n.b.emit(s,n.f,e)},togglePreview(e){i("preview",e)},togglePreviewOnly(e){i("previewOnly",e)},toggleHtmlPreview(e){i("htmlPreview",e)},toggleCatalog(e){n.b.emit(s,n.C,e)},triggerSave(){n.b.emit(s,n.O)},insert(e){n.b.emit(s,n.h,"universal",{generate:e})},focus(e){var t;null==(t=a.current)||t.focus(e)},rerender(){n.b.emit(s,n.R)},getSelectedText(){var e;return null==(e=a.current)?void 0:e.getSelectedText()},resetHistory(){var e;null==(e=a.current)||e.resetHistory()},domEventHandlers(e){n.b.emit(s,n.i,e)},execCommand(e){n.b.emit(s,n.h,e)}}),[i])},D=()=>r.j.jsx("div",{className:`${i.p}-divider`}),V=`${i.p}-dropdown-hidden`,B=e=>{let{relative:t="html"}=e,[l,n]=(0,o.useState)({overlayClass:V,overlayStyle:{}}),a=(0,o.useRef)({triggerHover:!1,overlayHover:!1}),s=(0,o.useRef)(null),c=(0,o.useRef)(null),d=(0,o.useCallback)(()=>{var l,r;a.current.triggerHover=!0;let o=s.current,i=c.current;if(!o||!i)return;let d=o.getBoundingClientRect(),u=o.offsetTop,m=o.offsetLeft,p=d.height,h=d.width,g=(null==(l=document.querySelector(t))?void 0:l.scrollLeft)||0,f=(null==(r=document.querySelector(t))?void 0:r.clientWidth)||0,b=m-i.offsetWidth/2+h/2-g;b+i.offsetWidth>g+f&&(b=g+f-i.offsetWidth),b<0&&(b=0),n(e=>({...e,overlayStyle:{top:u+p+"px",left:b+"px"}})),e.onChange(!0)},[e,t]),u=()=>{a.current.overlayHover=!0};(0,o.useEffect)(()=>{e.visible?n(e=>({...e,overlayClass:""})):n(e=>({...e,overlayClass:V}))},[e.visible]);let m=(0,o.useRef)(-1),p=(0,o.useCallback)(t=>{s.current===t.target?a.current.triggerHover=!1:a.current.overlayHover=!1,clearTimeout(m.current),m.current=window.setTimeout(()=>{a.current.overlayHover||a.current.triggerHover||e.onChange(!1)},10)},[e]);(0,o.useEffect)(()=>{var e,t,l,r;return null==(e=s.current)||e.addEventListener("mouseenter",d),null==(t=s.current)||t.addEventListener("mouseleave",p),null==(l=c.current)||l.addEventListener("mouseenter",u),null==(r=c.current)||r.addEventListener("mouseleave",p),()=>{var e,t,l,r;null==(e=s.current)||e.removeEventListener("mouseenter",d),null==(t=s.current)||t.removeEventListener("mouseleave",p),null==(l=c.current)||l.removeEventListener("mouseenter",u),null==(r=c.current)||r.removeEventListener("mouseleave",p)}},[p,d]);let h=e.children,g=e.overlay,f=(0,o.cloneElement)(h,{ref:s,key:"cloned-dropdown-trigger"}),b=r.j.jsx("div",{className:`${i.p}-dropdown ${l.overlayClass}`,style:l.overlayStyle,ref:c,children:r.j.jsx("div",{className:`${i.p}-dropdown-overlay`,children:g instanceof Array?g[0]:g})});return r.j.jsxs(r.j.Fragment,{children:[f,b]})},z=e=>"svg"===i.h.iconfontType?r.j.jsx("svg",{className:`${i.p}-icon`,"aria-hidden":"true",children:r.j.jsx("use",{xlinkHref:`#${i.p}-icon-${e.name}`})}):r.j.jsx("i",{className:`${i.p}-iconfont ${i.p}-icon-${e.name}`}),q=e=>{let{customIcon:t}=(0,o.useContext)(e8),l=t[e.name];if("object"==typeof l){let e=l.component;return"function"==typeof e?r.j.jsx(e,{...l.props}):r.j.jsx("span",{dangerouslySetInnerHTML:{__html:l.component}})}return r.j.jsx(z,{name:e.name})},W=`${i.p}-modal-container`,K=e=>{let{theme:t}=(0,o.useContext)(e8),{onClose:l=()=>{},onAdjust:a=()=>{},style:s={}}=e,[c,d]=(0,o.useState)(e.visible),[u,m]=(0,o.useState)([`${i.p}-modal`]),p=(0,o.useRef)(null),h=(0,o.useRef)(null),g=(0,o.useRef)(),f=(0,o.useRef)(null),[b,v]=(0,o.useState)({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),x=(0,o.useMemo)(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height},[e.height,e.isFullscreen,e.width]);return(0,o.useEffect)(()=>(g.current=document.body,()=>{g.current=void 0}),[]),(0,o.useEffect)(()=>{let t=()=>{};return!e.isFullscreen&&e.visible&&(t=N(h.current,(e,t)=>{v(l=>({...l,initPos:{left:e+"px",top:t+"px"}}))})),t},[e.isFullscreen,e.visible]),(0,o.useEffect)(()=>{if(c){let e=p.current.offsetWidth/2,t=p.current.offsetHeight/2,l=document.documentElement.clientWidth/2,r=document.documentElement.clientHeight/2;v(o=>({...o,maskStyle:{zIndex:i.h.editorConfig.zIndex+(0,n.j)()},modalStyle:{zIndex:i.h.editorConfig.zIndex+(0,n.j)()},initPos:{left:l-e+"px",top:r-t+"px"}}))}},[c]),(0,o.useEffect)(()=>{let t=e.visible;t?(m(()=>[`${i.p}-modal`,"zoom-in"]),d(t)):(m(()=>[`${i.p}-modal`,"zoom-out"]),setTimeout(()=>{d(t)},150))},[e.visible]),r.j.jsx(r.j.Fragment,{children:g.current&&(0,C.createPortal)(r.j.jsx("div",{ref:f,className:W,"data-theme":t,children:r.j.jsxs("div",{className:e.className,style:{...s,display:c?"block":"none"},children:[r.j.jsx("div",{className:`${i.p}-modal-mask`,style:b.maskStyle,onClick:l}),r.j.jsxs("div",{className:u.join(" "),style:{...b.modalStyle,...b.initPos,...x},ref:p,children:[r.j.jsx("div",{className:`${i.p}-modal-header`,ref:h,children:e.title||""}),r.j.jsxs("div",{className:`${i.p}-modal-func`,children:[e.showAdjust&&r.j.jsx("div",{className:`${i.p}-modal-adjust`,onClick:t=>{t.stopPropagation(),e.isFullscreen?v(e=>({...e,initPos:e.historyPos})):v(e=>({...e,historyPos:e.initPos,initPos:{left:"0",top:"0"}})),a instanceof Function&&a(!e.isFullscreen)},children:r.j.jsx(q,{name:e.isFullscreen?"suoxiao":"fangda"})}),r.j.jsx("div",{className:`${i.p}-modal-close`,onClick:t=>{t.stopPropagation(),e.onClose&&e.onClose()},children:r.j.jsx(q,{name:"close"})})]}),r.j.jsx("div",{className:`${i.p}-modal-body`,children:e.children})]})]})}),g.current)})},U=e=>{var t,l,n,a,s;let{editorId:c,usedLanguageText:d}=(0,o.useContext)(e8),u=(0,o.useMemo)(()=>{var t,l;switch(e.type){case"link":return null==(t=d.linkModalTips)?void 0:t.linkTitle;case"image":return null==(l=d.linkModalTips)?void 0:l.imageTitle;default:return""}},[e.type,d]),[m,p]=(0,o.useState)({desc:"",url:""});return(0,o.useEffect)(()=>{e.visible||setTimeout(()=>{p({desc:"",url:""})},200)},[e.visible]),(0,o.useMemo)(()=>{var t,l,o,n,a;return r.j.jsxs(K,{title:u,visible:e.visible,onClose:e.onCancel,children:[r.j.jsxs("div",{className:`${i.p}-form-item`,children:[r.j.jsx("label",{className:`${i.p}-label`,htmlFor:`link-desc-${c}`,children:null==(t=d.linkModalTips)?void 0:t.descLabel}),r.j.jsx("input",{placeholder:null==(l=d.linkModalTips)?void 0:l.descLabelPlaceHolder,className:`${i.p}-input`,id:`link-desc-${c}`,type:"text",value:m.desc,onChange:e=>{p(t=>({...t,desc:e.target.value}))}})]}),r.j.jsxs("div",{className:`${i.p}-form-item`,children:[r.j.jsx("label",{className:`${i.p}-label`,htmlFor:`link-url-${c}`,children:null==(o=d.linkModalTips)?void 0:o.urlLabel}),r.j.jsx("input",{placeholder:null==(n=d.linkModalTips)?void 0:n.urlLabelPlaceHolder,className:`${i.p}-input`,id:`link-url-${c}`,type:"text",value:m.url,onChange:e=>{p(t=>({...t,url:e.target.value}))}})]}),r.j.jsx("div",{className:`${i.p}-form-item`,children:r.j.jsx("button",{className:`${i.p}-btn ${i.p}-btn-row`,type:"button",onClick:()=>{e.onOk(m),p(e=>({...e,desc:"",url:""}))},children:null==(a=d.linkModalTips)?void 0:a.buttonOK})})]})},[u,e,null==(t=d.linkModalTips)?void 0:t.descLabel,null==(l=d.linkModalTips)?void 0:l.descLabelPlaceHolder,null==(n=d.linkModalTips)?void 0:n.urlLabel,null==(a=d.linkModalTips)?void 0:a.urlLabelPlaceHolder,null==(s=d.linkModalTips)?void 0:s.buttonOK,m])},G=null,Z=e=>{var t,l;let{editorId:a,usedLanguageText:s}=(0,o.useContext)(e8),c=i.h.editorExtensions.cropper.instance,d=(0,o.useRef)(null),u=(0,o.useRef)(null),m=(0,o.useRef)(null),[p,h]=(0,o.useState)({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});(0,o.useEffect)(()=>{e.visible&&!p.cropperInited&&(window.Cropper=c||window.Cropper,d.current.onchange=()=>{if(!window.Cropper){n.b.emit(a,n.E,{name:"Cropper",message:"Cropper is undefined"});return}let e=d.current.files||[];if((null==e?void 0:e.length)>0){let t=new FileReader;t.onload=e=>{h(t=>({...t,imgSelected:!0,imgSrc:e.target.result}))},t.readAsDataURL(e[0])}})},[e.visible,p.cropperInited]),(0,o.useEffect)(()=>{p.imgSrc&&(G=new window.Cropper(u.current,{viewMode:2,preview:`.${i.p}-clip-preview-target`}))},[p.imgSrc]),(0,o.useEffect)(()=>{var e;null==(e=m.current)||e.setAttribute("style","")},[p.imgSelected]),(0,o.useEffect)(()=>{var e;null==G||G.destroy(),null==(e=m.current)||e.setAttribute("style",""),u.current&&(G=new window.Cropper(u.current,{viewMode:2,preview:`.${i.p}-clip-preview-target`}))},[p.isFullscreen]);let g=(0,o.useMemo)(()=>p.isFullscreen?{width:"100%",height:"100%"}:{width:"668px",height:"392px"},[p.isFullscreen]),f=()=>{G.clear(),G.destroy(),G=null,d.current.value="",h(e=>({...e,imgSrc:"",imgSelected:!1}))},b=(0,o.useCallback)(e=>{h(t=>({...t,isFullscreen:e}))},[]);return(0,o.useMemo)(()=>{var t,l;return r.j.jsxs(K,{className:`${i.p}-modal-clip`,title:null==(t=s.clipModalTips)?void 0:t.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:p.isFullscreen,onAdjust:b,...g,children:[r.j.jsxs("div",{className:`${i.p}-form-item ${i.p}-clip`,children:[r.j.jsx("div",{className:`${i.p}-clip-main`,children:p.imgSelected?r.j.jsxs("div",{className:`${i.p}-clip-cropper`,children:[r.j.jsx("img",{src:p.imgSrc,ref:u,style:{display:"none"},alt:""}),r.j.jsx("div",{className:`${i.p}-clip-delete`,onClick:f,children:r.j.jsx(q,{name:"delete"})})]}):r.j.jsx("div",{className:`${i.p}-clip-upload`,onClick:()=>{d.current.click()},children:r.j.jsx(q,{name:"upload"})})}),r.j.jsx("div",{className:`${i.p}-clip-preview`,children:r.j.jsx("div",{className:`${i.p}-clip-preview-target`,ref:m})})]}),r.j.jsx("div",{className:`${i.p}-form-item`,children:r.j.jsx("button",{className:`${i.p}-btn`,type:"button",onClick:()=>{if(G){let t=G.getCroppedCanvas();n.b.emit(a,n.U,[(0,n.k)(t.toDataURL("image/png"))],e.onOk),f()}},children:null==(l=s.linkModalTips)?void 0:l.buttonOK})}),r.j.jsx("input",{ref:d,accept:"image/*",type:"file",multiple:!1,style:{display:"none"}})]})},[null==(t=s.clipModalTips)?void 0:t.title,null==(l=s.linkModalTips)?void 0:l.buttonOK,e.visible,e.onCancel,e.onOk,p.isFullscreen,p.imgSelected,p.imgSrc,b,g])},Y=e=>r.j.jsxs(r.j.Fragment,{children:[r.j.jsx(U,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel}),r.j.jsx(Z,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel})]}),X=e=>{let[t,l]=(0,o.useState)({x:-1,y:-1}),n=(0,o.useCallback)(()=>{let t=[...e.tableShape];return(!t[2]||t[2]<t[0])&&(t[2]=t[0]),(!t[3]||t[3]<t[3])&&(t[3]=t[1]),t},[e.tableShape]),[a,s]=(0,o.useState)(n);return(0,o.useEffect)(()=>{s(n)},[n]),r.j.jsx("div",{className:`${i.p}-table-shape`,onMouseLeave:()=>{s(n),l({x:-1,y:-1})},children:Array(a[1]).fill("").map((o,n)=>r.j.jsx("div",{className:`${i.p}-table-shape-row`,children:Array(a[0]).fill("").map((o,c)=>r.j.jsx("div",{className:`${i.p}-table-shape-col`,onMouseEnter:()=>{l({x:n,y:c}),c+1===a[0]&&c+1<a[2]?s(e=>{let t=[...e];return t[0]=e[0]+1,t}):c+2<a[0]&&a[0]>e.tableShape[0]&&s(e=>{let t=[...e];return t[0]=e[0]-1,t}),n+1===a[1]&&n+1<a[3]?s(e=>{let t=[...e];return t[1]=e[1]+1,t}):n+2<a[1]&&a[1]>e.tableShape[1]&&s(e=>{let t=[...e];return t[1]=e[1]-1,t})},onClick:()=>{e.onSelected(t)},children:r.j.jsx("div",{className:[`${i.p}-table-shape-col-default`,n<=t.x&&c<=t.y&&`${i.p}-table-shape-col-include`].filter(e=>!!e).join(" ")})},`table-shape-col-${c}`))},`table-shape-row-${n}`))})},Q=e=>{let{editorId:t}=(0,o.useContext)(e8),l=(0,o.useRef)(i.h.editorExtensions.screenfull.instance),r=(0,o.useRef)(!1),a=(0,o.useCallback)(e=>{if(!l.current){n.b.emit(t,n.E,{name:"fullscreen",message:"fullscreen is undefined"});return}l.current.isEnabled?(r.current=!r.current,(void 0===e?!l.current.isFullscreen:e)?l.current.request():l.current.exit()):console.error("browser does not support screenfull!")},[]);return(0,o.useEffect)(()=>{let t=()=>{e.updateSetting("fullscreen",r.current)},o=-1;if(!l.current){let{editorExtensions:e,editorExtensionsAttrs:r}=i.h;o=requestAnimationFrame(()=>{var o;I("script",{...null==(o=r.screenfull)?void 0:o.js,src:e.screenfull.js,id:`${i.p}-screenfull`,onload(){l.current=window.screenfull,l.current&&l.current.isEnabled&&l.current.on("change",t)}},"screenfull")})}return l.current&&l.current.isEnabled&&l.current.on("change",t),()=>{l.current||cancelAnimationFrame(o),l.current&&l.current.isEnabled&&l.current.off("change",t)}},[]),(0,o.useEffect)(()=>{n.b.on(t,{name:n.f,callback:a})},[]),{fullscreenHandler:a}},ee=(e,t)=>{let{editorId:l}=(0,o.useContext)(e8),[r,i]=(0,o.useState)({type:"link",linkVisible:!1,clipVisible:!1}),a=(0,o.useCallback)(()=>{i(e=>({...e,linkVisible:!1,clipVisible:!1}))},[]),s=(0,o.useCallback)(e=>{e&&t(r.type,{desc:e.desc,url:e.url,transform:"image"===r.type}),a()},[t,r.type,a]);return(0,o.useEffect)(()=>{n.b.on(l,{name:n.l,callback(e){i(t=>({...t,type:e,linkVisible:!0}))}});e.current.addEventListener("change",()=>{n.b.emit(l,n.U,Array.from(e.current.files||[])),e.current.value=""})},[]),{modalData:r,setModalData:i,onCancel:a,onOk:s}},et=e=>{let[t,l]=(0,o.useState)({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),r=(0,o.useCallback)(e=>{l(t=>({...t,title:e}))},[]),n=(0,o.useCallback)(()=>{l(e=>({...e,title:!1}))},[]),i=(0,o.useCallback)(e=>{l(t=>({...t,image:e}))},[]),a=(0,o.useCallback)(()=>{l(e=>({...e,image:!1}))},[]),s=(0,o.useCallback)(e=>{l(t=>({...t,table:e}))},[]),c=(0,o.useCallback)(t=>{e("table",{selectedShape:t})},[e]),d=(0,o.useCallback)(e=>{l(t=>({...t,mermaid:e}))},[]),u=(0,o.useCallback)(()=>{l(e=>({...e,mermaid:!1}))},[]),m=(0,o.useCallback)(e=>{l(t=>({...t,katex:e}))},[]);return{visible:t,onTitleChange:r,onTitleClose:n,onImageChange:i,onImageClose:a,onTableChange:s,onTableSelected:c,onMermaidChange:d,onMermaidClose:u,onKatexChange:m,onKatexClose:(0,o.useCallback)(()=>{l(e=>({...e,katex:!1}))},[])}},el=0,er=o.memo(e=>{let{toolbars:t,toolbarsExclude:l,updateSetting:s}=e,{editorId:c,usedLanguageText:d,theme:u,previewTheme:m,language:p}=(0,o.useContext)(e8),[h]=(0,o.useState)(()=>`${c}-toolbar-wrapper`),g=(0,o.useRef)(null),f=(0,o.useRef)(null),b=(0,o.useCallback)((e,t)=>{n.b.emit(c,n.h,e,t)},[]),{fullscreenHandler:v}=Q(e),{modalData:x,setModalData:j,onCancel:k,onOk:$}=ee(f,b),{visible:w,onTitleChange:C,onTitleClose:y,onImageChange:T,onImageClose:E,onTableChange:N,onTableSelected:I,onMermaidChange:S,onMermaidClose:M,onKatexChange:L,onKatexClose:H}=et(b),F=(0,o.useMemo)(()=>{var t,l,o,n,a,s,c,u;return r.j.jsx(B,{relative:`#${h}`,visible:w.title,onChange:C,overlay:r.j.jsxs("ul",{className:`${i.p}-menu`,onClick:y,children:[r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h1")},children:null==(t=d.titleItem)?void 0:t.h1}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h2")},children:null==(l=d.titleItem)?void 0:l.h2}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h3")},children:null==(o=d.titleItem)?void 0:o.h3}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h4")},children:null==(n=d.titleItem)?void 0:n.h4}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h5")},children:null==(a=d.titleItem)?void 0:a.h5}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-title`,onClick:()=>{b("h6")},children:null==(s=d.titleItem)?void 0:s.h6})]},"bar-title-overlay"),children:r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(c=d.toolbarTips)?void 0:c.title,children:[r.j.jsx(q,{name:"title"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(u=d.toolbarTips)?void 0:u.title})]},"bar-title-trigger")},"bar-title")},[h,w.title,C,y,d.titleItem,d.toolbarTips,e.showToolbarName,b]),R=(0,o.useMemo)(()=>{var t,l,o,n,a;return r.j.jsx(B,{relative:`#${h}`,visible:w.image,onChange:T,overlay:r.j.jsxs("ul",{className:`${i.p}-menu`,onClick:E,children:[r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-image`,onClick:()=>{j(e=>({...e,type:"image",linkVisible:!0}))},children:null==(t=d.imgTitleItem)?void 0:t.link}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-image`,onClick:()=>{f.current.click()},children:null==(l=d.imgTitleItem)?void 0:l.upload}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-image`,onClick:()=>{j(e=>({...e,type:"image",clipVisible:!0}))},children:null==(o=d.imgTitleItem)?void 0:o.clip2upload})]},"bar-image-overlay"),children:r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(n=d.toolbarTips)?void 0:n.image,children:[r.j.jsx(q,{name:"image"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(a=d.toolbarTips)?void 0:a.image})]},"bar-image-trigger")},"bar-image")},[h,w.image,T,E,d.imgTitleItem,d.toolbarTips,e.showToolbarName,j]),A=(0,o.useMemo)(()=>{var t,l;return r.j.jsx(B,{relative:`#${h}`,visible:w.table,onChange:N,overlay:r.j.jsx(X,{tableShape:e.tableShape,onSelected:I},"bar-table-overlay"),children:r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(t=d.toolbarTips)?void 0:t.table,children:[r.j.jsx(q,{name:"table"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(l=d.toolbarTips)?void 0:l.table})]},"bar-table-trigger")},"bar-table")},[h,w.table,N,e.tableShape,e.showToolbarName,I,d.toolbarTips]),P=(0,o.useMemo)(()=>{var t,l,o,n,a,s,c,u,m,p;return r.j.jsx(B,{relative:`#${h}`,visible:w.mermaid,onChange:S,overlay:r.j.jsxs("ul",{className:`${i.p}-menu`,onClick:M,children:[r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("flow")},children:null==(t=d.mermaid)?void 0:t.flow}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("sequence")},children:null==(l=d.mermaid)?void 0:l.sequence}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("gantt")},children:null==(o=d.mermaid)?void 0:o.gantt}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("class")},children:null==(n=d.mermaid)?void 0:n.class}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("state")},children:null==(a=d.mermaid)?void 0:a.state}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("pie")},children:null==(s=d.mermaid)?void 0:s.pie}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("relationship")},children:null==(c=d.mermaid)?void 0:c.relationship}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-mermaid`,onClick:()=>{b("journey")},children:null==(u=d.mermaid)?void 0:u.journey})]},"bar-mermaid-overlay"),children:r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(m=d.toolbarTips)?void 0:m.mermaid,children:[r.j.jsx(q,{name:"mermaid"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(p=d.toolbarTips)?void 0:p.mermaid})]},"bar-mermaid-trigger")},"bar-mermaid")},[h,w.mermaid,S,M,d.mermaid,d.toolbarTips,e.showToolbarName,b]),J=(0,o.useMemo)(()=>{var t,l,o,n;return r.j.jsx(B,{relative:`#${h}`,visible:w.katex,onChange:L,overlay:r.j.jsxs("ul",{className:`${i.p}-menu`,onClick:H,children:[r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-katex`,onClick:()=>{b("katexInline")},children:null==(t=d.katex)?void 0:t.inline}),r.j.jsx("li",{className:`${i.p}-menu-item ${i.p}-menu-item-katex`,onClick:()=>{b("katexBlock")},children:null==(l=d.katex)?void 0:l.block})]},"bar-katex-overlay"),children:r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(o=d.toolbarTips)?void 0:o.katex,children:[r.j.jsx(q,{name:"formula"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(n=d.toolbarTips)?void 0:n.katex})]},"bar-katex-trigger")},"bar-katex")},[h,w.katex,L,H,d.katex,d.toolbarTips,e.showToolbarName,b]),O=(0,o.useCallback)(t=>{var l,h,g,f,k,$,w,C,y,T,E,N,I,S,M,L,H,O,_,V,B,z,W,K,U,G,Z,Y,X,Q,ee,et,er,eo,en,ei,ea,es,ec,ed,eu,em,ep,eh,eg,ef,eb,ev,ex,ej;if(i.b.includes(t))switch(t){case"-":return r.j.jsx(D,{},`bar-${el++}`);case"bold":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(l=d.toolbarTips)?void 0:l.bold,onClick:()=>{b("bold")},children:[r.j.jsx(q,{name:"bold"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(h=d.toolbarTips)?void 0:h.bold})]},"bar-bold");case"underline":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(g=d.toolbarTips)?void 0:g.underline,onClick:()=>{b("underline")},children:[r.j.jsx(q,{name:"underline"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(f=d.toolbarTips)?void 0:f.underline})]},"bar-underline");case"italic":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(k=d.toolbarTips)?void 0:k.italic,onClick:()=>{b("italic")},children:[r.j.jsx(q,{name:"italic"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==($=d.toolbarTips)?void 0:$.italic})]},"bar-italic");case"strikeThrough":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(w=d.toolbarTips)?void 0:w.strikeThrough,onClick:()=>{b("strikeThrough")},children:[r.j.jsx(q,{name:"strike-through"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(C=d.toolbarTips)?void 0:C.strikeThrough})]},"bar-strikeThrough");case"title":return F;case"sub":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(y=d.toolbarTips)?void 0:y.sub,onClick:()=>{b("sub")},children:[r.j.jsx(q,{name:"sub"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(T=d.toolbarTips)?void 0:T.sub})]},"bar-sub");case"sup":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(E=d.toolbarTips)?void 0:E.sup,onClick:()=>{b("sup")},children:[r.j.jsx(q,{name:"sup"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(N=d.toolbarTips)?void 0:N.sup})]},"bar-sup");case"quote":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(I=d.toolbarTips)?void 0:I.quote,onClick:()=>{b("quote")},children:[r.j.jsx(q,{name:"quote"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(S=d.toolbarTips)?void 0:S.quote})]},"bar-quote");case"unorderedList":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(M=d.toolbarTips)?void 0:M.unorderedList,onClick:()=>{b("unorderedList")},children:[r.j.jsx(q,{name:"unordered-list"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(L=d.toolbarTips)?void 0:L.unorderedList})]},"bar-unorderedList");case"orderedList":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(H=d.toolbarTips)?void 0:H.orderedList,onClick:()=>{b("orderedList")},children:[r.j.jsx(q,{name:"ordered-list"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(O=d.toolbarTips)?void 0:O.orderedList})]},"bar-orderedList");case"task":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(_=d.toolbarTips)?void 0:_.task,onClick:()=>{b("task")},children:[r.j.jsx(q,{name:"task"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(V=d.toolbarTips)?void 0:V.task})]},"bar-task");case"codeRow":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(B=d.toolbarTips)?void 0:B.codeRow,onClick:()=>{b("codeRow")},children:[r.j.jsx(q,{name:"code-row"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(z=d.toolbarTips)?void 0:z.codeRow})]},"bar-codeRow");case"code":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(W=d.toolbarTips)?void 0:W.code,onClick:()=>{b("code")},children:[r.j.jsx(q,{name:"code"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(K=d.toolbarTips)?void 0:K.code})]},"bar-code");case"link":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(U=d.toolbarTips)?void 0:U.link,onClick:()=>{j({...x,type:"link",linkVisible:!0})},children:[r.j.jsx(q,{name:"link"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(G=d.toolbarTips)?void 0:G.link})]},"bar-link");case"image":return e.noUploadImg?r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(Z=d.toolbarTips)?void 0:Z.image,onClick:()=>{j(e=>({...e,type:"image",linkVisible:!0}))},children:[r.j.jsx(q,{name:"image"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(Y=d.toolbarTips)?void 0:Y.image})]},"bar-image-no-upload"):R;case"table":return A;case"revoke":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(X=d.toolbarTips)?void 0:X.revoke,onClick:()=>{n.b.emit(c,n.n)},children:[r.j.jsx(q,{name:"revoke"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(Q=d.toolbarTips)?void 0:Q.revoke})]},"bar-revoke");case"next":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(ee=d.toolbarTips)?void 0:ee.next,onClick:()=>{n.b.emit(c,n.m)},children:[r.j.jsx(q,{name:"next"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(et=d.toolbarTips)?void 0:et.next})]},"bar-next");case"save":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(er=d.toolbarTips)?void 0:er.save,onClick:()=>{n.b.emit(c,n.O)},children:[r.j.jsx(q,{name:"baocun"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(eo=d.toolbarTips)?void 0:eo.save})]},"bar-save");case"prettier":return e.noPrettier?"":r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(en=d.toolbarTips)?void 0:en.prettier,onClick:()=>{b("prettier")},children:[r.j.jsx(q,{name:"prettier"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(ei=d.toolbarTips)?void 0:ei.prettier})]},"bar-prettier");case"pageFullscreen":return!e.setting.fullscreen&&r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(ea=d.toolbarTips)?void 0:ea.pageFullscreen,onClick:()=>{s("pageFullscreen")},children:[r.j.jsx(q,{name:e.setting.pageFullscreen?"suoxiao":"fangda"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(es=d.toolbarTips)?void 0:es.pageFullscreen})]},"bar-pageFullscreen");case"fullscreen":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(ec=d.toolbarTips)?void 0:ec.fullscreen,onClick:()=>{v()},children:[r.j.jsx(q,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(ed=d.toolbarTips)?void 0:ed.fullscreen})]},"bar-fullscreen");case"catalog":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(eu=d.toolbarTips)?void 0:eu.catalog,onClick:()=>{n.b.emit(c,n.C)},children:[r.j.jsx(q,{name:"catalog"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(em=d.toolbarTips)?void 0:em.catalog})]},"bar-catalog");case"preview":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(ep=d.toolbarTips)?void 0:ep.preview,onClick:()=>{s("preview")},children:[r.j.jsx(q,{name:"preview"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(eh=d.toolbarTips)?void 0:eh.preview})]},"bar-preview");case"previewOnly":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(eg=d.toolbarTips)?void 0:eg.previewOnly,onClick:()=>{e.updateSetting("previewOnly")},children:[r.j.jsx(q,{name:"preview-only"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(ef=d.toolbarTips)?void 0:ef.previewOnly})]},"bar-preview-only");case"htmlPreview":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(eb=d.toolbarTips)?void 0:eb.htmlPreview,onClick:()=>{s("htmlPreview")},children:[r.j.jsx(q,{name:"coding"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(ev=d.toolbarTips)?void 0:ev.htmlPreview})]},"bar-htmlPreview");case"github":return r.j.jsxs("div",{className:`${i.p}-toolbar-item`,title:null==(ex=d.toolbarTips)?void 0:ex.github,onClick:()=>(0,a.kZ)("https://github.com/imzbf/md-editor-rt"),children:[r.j.jsx(q,{name:"github"}),e.showToolbarName&&r.j.jsx("div",{className:`${i.p}-toolbar-item-name`,children:null==(ej=d.toolbarTips)?void 0:ej.github})]},"bar-github");case"mermaid":return P;case"katex":return J}else{if(!e.defToolbars)return"";let l=e.defToolbars[t];return l?(0,o.cloneElement)(l,{theme:u,previewTheme:m,language:p,insert(e){n.b.emit(c,n.h,"universal",{generate:e})}}):""}},[e,d.toolbarTips,b,F,j,x,R,A,c,s,v,P,J,u,p,m]),_=(0,o.useMemo)(()=>{let e=t.filter(e=>!l.includes(e)),r=e.indexOf("="),o=-1===r?e:e.slice(0,r+1),n=-1===r?[]:e.slice(r,Number.MAX_SAFE_INTEGER);return[o.map(e=>O(e)),n.map(e=>O(e))]},[t,l,O]);return(0,o.useEffect)(()=>{let e=()=>{};return g.current&&(e=(0,a.bv)(g.current)),()=>{e()}},[t]),r.j.jsxs(r.j.Fragment,{children:[t.length>0&&r.j.jsx("div",{className:`${i.p}-toolbar-wrapper`,ref:g,id:h,children:r.j.jsxs("div",{className:(0,n.c)([`${i.p}-toolbar`,e.showToolbarName&&`${i.p}-stn`]),children:[r.j.jsx("div",{className:`${i.p}-toolbar-left`,children:_[0]}),r.j.jsx("div",{className:`${i.p}-toolbar-right`,children:_[1]})]})}),r.j.jsx("input",{ref:f,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}}),r.j.jsx(Y,{linkVisible:x.linkVisible,clipVisible:x.clipVisible,type:x.type,onCancel:k,onOk:$})]})}),eo=`.${i.p}-preview > [data-line]`,en=(e,t)=>{let l=(0,a.Ds)(()=>{e.removeEventListener("scroll",r),e.addEventListener("scroll",r),t.removeEventListener("scroll",r),t.addEventListener("scroll",r)},50),r=o=>{let n=e.clientHeight,i=t.clientHeight,a=e.scrollHeight,s=(a-n)/(t.scrollHeight-i);o.target===e?(t.removeEventListener("scroll",r),t.scrollTo({top:e.scrollTop/s})):(e.removeEventListener("scroll",r),e.scrollTo({top:t.scrollTop*s})),l()};return[()=>{l().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",r),t.removeEventListener("scroll",r)}]},ei=(e,t,l)=>{let{view:r}=l,o=(0,a.qA)(),n=e=>r.lineBlockAt(r.state.doc.line(e).from).top,i=e=>r.lineBlockAt(r.state.doc.line(e).from).height,s=[],c=[],d=[],u=()=>{s=[],d=[];let e=(c=(c=[]).concat(Array.from(t.querySelectorAll(eo)))).map(e=>Number(e.dataset.line)+1);d=d.concat(e);let{lines:l}=r.state.doc,o=1,n=e.shift()??l;for(let t=1;t<=l;t++)t===n&&(o=t,n=e.shift()||l+1),s.push({start:o,end:n-1})},m=0,p=0,h=()=>{var e,l;if(0!==p)return!1;m++;let{scrollDOM:a,contentHeight:c}=r,d=+getComputedStyle(t).paddingTop.replace("px",""),u=r.lineBlockAtHeight(a.scrollTop),{number:h}=r.state.doc.lineAt(u.from),g=s[h-1];if(!g)return!1;let f=n(g.end)+i(g.end),b=0,v=n(g.start),x=t.querySelector(`[data-line="${g.start-1}"]`)||(null==(e=t.firstElementChild)?void 0:e.firstElementChild),j=t.querySelector(`[data-line="${g.end}"]`)||(null==(l=t.lastElementChild)?void 0:l.lastElementChild),k=0,$=0;0===v?(b=a.scrollTop/f,x===j?(d=0,f=c-a.offsetHeight,k=j.offsetTop+j.offsetHeight-t.clientHeight):k=j.offsetTop):(b=(a.scrollTop-v)/(f-v),$=x.offsetTop,k=j.offsetTop-$),f>a.scrollHeight-a.clientHeight&&(b=(a.scrollTop-v)/(a.scrollHeight-a.clientHeight-v),$=x.offsetTop,k=t.scrollHeight-t.clientHeight-$+10),o(t,$-d+k*b,()=>{m--})},g=()=>{var l,a,u,h,g,f;if(0!==m)return;p++;let{scrollDOM:b}=r,v=t.scrollTop,x=t.scrollHeight,j=null==(l=t.firstElementChild)?void 0:l.firstElementChild,k=null==(a=t.firstElementChild)?void 0:a.lastElementChild;if(d.length>0){let e=Math.ceil(Number(d[d.length-1])*(v/x)),l=d.findLastIndex(t=>t<=e);e=d[l=-1===l?0:l];for(let t=l;t>=0&&t<d.length;)if(c[t].offsetTop>v){if(t-1>=0){t--;continue}e=-1,l=t;break}else{if(t+1<d.length&&c[t+1].offsetTop<v){t++;continue}e=d[t],l=t;break}switch(e){case -1:j=null==(u=t.firstElementChild)?void 0:u.firstElementChild,k=c[l];break;case d.length-1:j=c[l],k=null==(h=t.firstElementChild)?void 0:h.lastElementChild;break;default:j=c[l],k=c[l+1===c.length?l:l+1]}}let $=j===(null==(g=t.firstElementChild)?void 0:g.firstElementChild)?0:j.offsetTop,w=k.offsetTop,C=0,{start:y,end:T}=s[Number(j.dataset.line||0)],E=n(y),N=n(T===r.state.doc.lines?T:T+1),I=0;N>b.scrollHeight-b.clientHeight||k.scrollTop>t.scrollHeight-t.clientHeight?(C=Math.max((v-$)/(t.scrollHeight-$-t.clientHeight),0),I=8+(N=n(r.state.doc.lines)+i(r.state.doc.lines))-E-e.clientHeight):j===(null==(f=t.firstElementChild)?void 0:f.firstElementChild)?(j===k&&(w=k.offsetTop+k.offsetHeight+ +getComputedStyle(k).marginBottom.replace("px","")),I=N,C=Math.max(v/w,0)):(C=Math.max((v-$)/(w-$),0),I=N-E),o(e,E+I*C,()=>{p--})},f=(0,a.P2)(l=>{var o;let{scrollDOM:n,contentHeight:i}=r;if(i<=n.clientHeight||t.firstElementChild.clientHeight<=t.clientHeight||r.state.doc.lines<(null==(o=s[s.length-1])?void 0:o.end))return!1;l.target===e?h():g()},1);return[()=>{u(),e.addEventListener("scroll",f),t.addEventListener("scroll",f),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",f),t.removeEventListener("scroll",f)}]},ea=(e,t,l)=>{let{editorId:r}=(0,o.useContext)(e8),[n,i]=(0,o.useState)({clear(){},init(){}});(0,o.useEffect)(()=>{n.clear();let e=document.querySelector(`#${r} .cm-scroller`),t=document.querySelector(`[id="${r}-preview-wrapper"]`),o=document.querySelector(`[id="${r}-html-wrapper"]`);if(t||o){let[r,n]=(t?ei:en)(e,t||o,l.current);i({init:r,clear:n})}},[t,e.setting.fullscreen,e.setting.pageFullscreen,e.setting.preview,e.setting.htmlPreview]),(0,o.useEffect)(()=>(e.scrollAuto&&!e.setting.previewOnly&&(e.setting.preview||e.setting.htmlPreview)?n.init():n.clear(),()=>{n.clear()}),[n,e.scrollAuto,e.setting.preview,e.setting.htmlPreview,e.setting.previewOnly])},es=(e,t,l)=>{var r;let o="",a=0,s=0,c=!0,d=!1,u=t.getSelectedText(),m=i.h.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){let t=e.replace(/^h(\d)/,(e,t)=>Array(Number(t)).fill("#",0,t).join(""));o=`${t} ${u}`,a=t.length+1}else if("prettier"===e){let e=window.prettier||i.h.editorExtensions.prettier.prettierInstance,a=[(null==(r=window.prettierPlugins)?void 0:r.markdown)||i.h.editorExtensions.prettier.parserMarkdownInstance];e&&void 0!==a[0]?o=e.format(t.getValue(),{parser:"markdown",plugins:a}):(n.b.emit(l.editorId,n.E,{name:"prettier",message:"prettier is undefined"}),o=t.getValue()),c=!1,d=!0}else switch(e){case"bold":o=`**${u}**`,a=2,s=-2;break;case"underline":o=`<u>${u}</u>`,a=3,s=-4;break;case"italic":o=`*${u}*`,a=1,s=-1;break;case"strikeThrough":o=`~~${u}~~`,a=2,s=-2;break;case"sub":o=`<sub>${u}</sub>`,a=5,s=-6;break;case"sup":o=`<sup>${u}</sup>`,a=5,s=-6;break;case"codeRow":o="`"+u+"`",a=1,s=-1;break;case"quote":o=`> ${u}`,a=2;break;case"orderedList":o=`1. ${u}`,a=3;break;case"unorderedList":o=`- ${u}`,a=2;break;case"task":o=`- [ ] ${u}`,a=6;break;case"code":{let e=l.text||u||"",t=l.mode||"language";o=`\`\`\`${t}
${e}
\`\`\`
`,a=3,s=3+t.length-o.length;break}case"table":{o="|";let{selectedShape:e={x:1,y:1}}=l,{x:t,y:r}=e;for(let e=0;e<=r;e++)o+=" col |";o+=`
|`;for(let e=0;e<=r;e++)o+=" - |";for(let e=0;e<=t;e++){o+=`
|`;for(let e=0;e<=r;e++)o+=" content |"}a=2,s=5-o.length;break}case"link":{let{desc:e,url:t}=l;o=`[${e}](${t})`,c=!1;break}case"image":{let{desc:e,url:t,urls:r}=l;o=r instanceof Array?r.reduce((e,t)=>{let{url:l="",alt:r="",title:o=""}="object"==typeof t?t:{url:t};return e+`![${r}](${l}${o?" '"+o+"'":""})
`},""):`![${e}](${t})
`,c=!1;break}case"flow":o=`\`\`\`mermaid
${(null==m?void 0:m.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,a=3,s=10-o.length;break;case"sequence":o=`\`\`\`mermaid
${(null==m?void 0:m.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,a=3,s=10-o.length;break;case"gantt":o=`\`\`\`mermaid
${(null==m?void 0:m.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,a=3,s=10-o.length;break;case"class":o=`\`\`\`mermaid
${(null==m?void 0:m.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,a=3,s=10-o.length;break;case"state":o=`\`\`\`mermaid
${(null==m?void 0:m.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,a=3,s=10-o.length;break;case"pie":o=`\`\`\`mermaid
${(null==m?void 0:m.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,a=3,s=10-o.length;break;case"relationship":o=`\`\`\`mermaid
${(null==m?void 0:m.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,a=3,s=10-o.length;break;case"journey":o=`\`\`\`mermaid
${(null==m?void 0:m.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,a=3,s=10-o.length;break;case"katexInline":o="$$",a=1,s=-1;break;case"katexBlock":o=`$$

$$
`,a=3,s=-4;break;case"universal":{let{generate:e}=l,t=e(u);o=t.targetValue,c=t.select??!0,a=t.deviationStart||0,s=t.deviationEnd||0}}return{text:o,options:{select:c,deviationStart:a,deviationEnd:s,replaceAll:d}}},ec=e=>{let t=new u.F6;return l=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(l)}):e.dispatch({effects:u.Py.appendConfig.of(t.of(l))}),!0)};class ed{constructor(e){E(this,"view"),E(this,"maxLength",Number.MAX_SAFE_INTEGER),E(this,"toggleTabSize"),E(this,"togglePlaceholder"),E(this,"setExtensions"),E(this,"toggleDisabled"),E(this,"toggleReadOnly"),E(this,"toggleMaxlength"),this.view=e,this.toggleTabSize=ec(this.view),this.togglePlaceholder=ec(this.view),this.setExtensions=ec(this.view),this.toggleDisabled=ec(this.view),this.toggleReadOnly=ec(this.view),this.toggleMaxlength=ec(this.view)}getValue(){return this.view.state.doc.toString()}setValue(e,t=0,l=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:l,insert:e}})}getSelectedText(){let{from:e,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(e,t)}replaceSelectedText(e,t={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},l){try{if(t.replaceAll){if(this.setValue(e),e.length>this.maxLength)throw Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+e.length>this.maxLength)throw Error("The input text is too long");let{from:l}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(e)),t.select){let r=l+e.length+t.deviationEnd;this.view.dispatch({selection:u.jT.create([u.jT.range(l+t.deviationStart,r),u.jT.cursor(r)],1)})}this.view.focus()}catch(t){if("The input text is too long"===t.message)n.b.emit(l,n.E,{name:"overlength",message:t.message,data:e});else throw t}}setTabSize(e){this.toggleTabSize([u.yy.tabSize.of(e),p.c.of(" ".repeat(e))])}setPlaceholder(e){this.togglePlaceholder((0,s.W$)(e))}focus(e){if(this.view.focus(),!e)return;let t=0,l=0,r=0;switch(e){case"start":break;case"end":t=l=r=this.getValue().length;break;default:t=e.rangeAnchor||e.cursorPos,l=e.rangeHead||e.cursorPos,r=e.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:u.jT.create([u.jT.range(t,l),u.jT.cursor(r)],1)})}setDisabled(e){this.toggleDisabled([s.tk.editable.of(!e)])}setReadOnly(e){this.toggleReadOnly([u.yy.readOnly.of(e)])}setMaxLength(e){this.maxLength=e,this.toggleMaxlength([u.yy.changeFilter.of(t=>t.newDoc.length<=e)])}}let eu="var(--md-color)",em="var(--md-color)",ep="#e5c07b",eh="#d19a66",eg="var(--md-bk-color)",ef="var(--md-bk-color)",eb="#528bff",ev=s.tk.theme({"&":{color:em,backgroundColor:eg},".cm-content":{caretColor:eb},".cm-cursor, .cm-dropCursor":{borderLeftColor:eb},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#ceedfa33"},".cm-panels":{backgroundColor:"#21252b",color:em},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:eg,color:em,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#2c313a"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:ef},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ef,borderBottomColor:ef},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:em}}},{dark:!0}),ex=p.Qf.define([{tag:h.pJ.keyword,color:"#c678dd"},{tag:[h.pJ.name,h.pJ.deleted,h.pJ.character,h.pJ.propertyName,h.pJ.macroName],color:eu},{tag:[h.pJ.function(h.pJ.variableName),h.pJ.labelName],color:"#e5c07b"},{tag:[h.pJ.color,h.pJ.constant(h.pJ.name),h.pJ.standard(h.pJ.name)],color:eh},{tag:[h.pJ.definition(h.pJ.name),h.pJ.separator],color:em},{tag:[h.pJ.typeName,h.pJ.className,h.pJ.number,h.pJ.changed,h.pJ.annotation,h.pJ.modifier,h.pJ.self,h.pJ.namespace],color:"#e5c07b"},{tag:[h.pJ.operator,h.pJ.operatorKeyword,h.pJ.url,h.pJ.escape,h.pJ.regexp,h.pJ.link,h.pJ.special(h.pJ.string)],color:"#56b6c2"},{tag:[h.pJ.meta,h.pJ.comment],color:ep},{tag:h.pJ.strong,fontWeight:"bold"},{tag:h.pJ.emphasis,fontStyle:"italic"},{tag:h.pJ.strikethrough,textDecoration:"line-through"},{tag:h.pJ.link,color:ep,textDecoration:"underline"},{tag:h.pJ.heading,fontWeight:"bold",color:eu},{tag:[h.pJ.atom,h.pJ.bool,h.pJ.special(h.pJ.variableName)],color:eh},{tag:[h.pJ.processingInstruction,h.pJ.string,h.pJ.inserted],color:"var(--md-color)"},{tag:h.pJ.invalid,color:"#ffffff"}]),ej=[ev,(0,p.nF)(ex)],ek="#3f4a54",e$="#3f4a54",ew="#2d8cf0",eC="#d19a66",ey="var(--md-bk-color)",eT="var(--md-bk-color)",eE="#3f4a54",eN=s.tk.theme({"&":{color:e$,backgroundColor:ey},".cm-content":{caretColor:eE},".cm-cursor, .cm-dropCursor":{borderLeftColor:eE},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#bad5fa"},".cm-panels":{backgroundColor:"#f6f6f6",color:e$},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ey,color:e$,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:"#ceedfa33"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:eT},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:eT,borderBottomColor:eT},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:e$}}}),eI=p.Qf.define([{tag:h.pJ.keyword,color:"#c678dd"},{tag:[h.pJ.name,h.pJ.deleted,h.pJ.character,h.pJ.propertyName,h.pJ.macroName],color:ek},{tag:[h.pJ.function(h.pJ.variableName),h.pJ.labelName],color:"#2d8cf0"},{tag:[h.pJ.color,h.pJ.constant(h.pJ.name),h.pJ.standard(h.pJ.name)],color:eC},{tag:[h.pJ.definition(h.pJ.name),h.pJ.separator],color:e$},{tag:[h.pJ.typeName,h.pJ.className,h.pJ.number,h.pJ.changed,h.pJ.annotation,h.pJ.modifier,h.pJ.self,h.pJ.namespace],color:"#e5c07b"},{tag:[h.pJ.operator,h.pJ.operatorKeyword,h.pJ.url,h.pJ.escape,h.pJ.regexp,h.pJ.link,h.pJ.special(h.pJ.string)],color:"#56b6c2"},{tag:[h.pJ.meta,h.pJ.comment],color:ew},{tag:h.pJ.strong,fontWeight:"bold"},{tag:h.pJ.emphasis,fontStyle:"italic"},{tag:h.pJ.strikethrough,textDecoration:"line-through"},{tag:h.pJ.link,color:ew,textDecoration:"underline"},{tag:h.pJ.heading,fontWeight:"bold",color:ek},{tag:[h.pJ.atom,h.pJ.bool,h.pJ.special(h.pJ.variableName)],color:eC},{tag:[h.pJ.processingInstruction,h.pJ.string,h.pJ.inserted],color:"#3f4a54"},{tag:h.pJ.invalid,color:"#fff"}]),eS=[eN,(0,p.nF)(eI)],eM=(e,t,l,r,o)=>(n,i,a,s)=>{let c=`${e}${t}`.slice(s-a);n.dispatch(n.state.replaceSelection(`${c}${l}${r}`));let d=a+i.label.length+("title"===o?l.length:0);n.dispatch({selection:u.jT.create([u.jT.range(a+i.label.length+("title"===o?1:-t.length),d),u.jT.cursor(d)],1)}),n.focus()},eL=e=>(t,l,r,o)=>{let n=e.slice(o-r);t.dispatch(t.state.replaceSelection(`${n} `))},eH=e=>{let t=e=>{let t=e.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return null===t||t.from==t.to&&e.explicit?null:{from:t.from,options:[...["h1","h2","h3","h4","h5","h6"].map((e,t)=>{let l=Array(t+1).fill("#").join("");return{label:l,type:"text",apply:eL(l)}}),...["unchecked","checked"].map(e=>{let t="checked"===e?"- [x]":"- [ ]";return{label:t,type:"text",apply:eL(t)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(e=>({label:`${e[0]}${e[1]}`,type:"text",apply:eM(e[0],e[1],"","`"===e[0]?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:eM("$","","","$","type")},{label:"$$",type:"text",apply:eM("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(e=>({label:`!!! ${e}`,type:"text",apply:eM("!!!",` ${e}`," Title",`

!!!`,"title")}))]}};return(0,g.ys)({override:e?[t,...e]:[t]})},eF=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(n.b.emit(e,n.h,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:m.YE,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:t=>(n.b.emit(e,n.O,t.state.doc.toString()),!0),shift:()=>(n.b.emit(e,n.h,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",run:()=>(n.b.emit(e,n.h,"underline"),!0),shift:()=>(n.b.emit(e,n.h,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",run:()=>(n.b.emit(e,n.h,"italic"),!0),shift:()=>(n.b.emit(e,n.l,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(n.b.emit(e,n.h,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(n.b.emit(e,n.h,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(n.b.emit(e,n.h,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(n.b.emit(e,n.h,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(n.b.emit(e,n.h,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(n.b.emit(e,n.h,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(n.b.emit(e,n.h,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(n.b.emit(e,n.h,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(n.b.emit(e,n.h,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(n.b.emit(e,n.h,"code"),!0),any:(t,l)=>(!!l.ctrlKey||!!l.metaKey)&&!!l.altKey&&"KeyC"===l.code&&(n.b.emit(e,n.h,"codeRow"),!0)},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(n.b.emit(e,n.l,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>!t.noPrettier&&(n.b.emit(e,n.h,"prettier"),!0)},{any:(t,l)=>(!!l.ctrlKey||!!l.metaKey)&&!!l.altKey&&!!l.shiftKey&&"KeyT"===l.code&&(n.b.emit(e,n.h,"table"),!0)},...f.Lp],eR=(e,t)=>{let{editorId:l}=(0,o.useContext)(e8),r=(0,o.useCallback)(e=>{e instanceof Promise?e.then(e=>{n.b.emit(l,n.h,"universal",{generate:()=>({targetValue:e})})}).catch(e=>{console.error(e)}):n.b.emit(l,n.h,"universal",{generate:()=>({targetValue:e})})},[l]);return(0,o.useCallback)(o=>{var i,a,s;if(!o.clipboardData)return;if(o.clipboardData.files.length>0){let{files:e}=o.clipboardData;n.b.emit(l,n.U,Array.from(e).filter(e=>/image\/.*/.test(e.type))),o.preventDefault();return}let c=o.clipboardData.getData("text/plain"),d=(null==(i=t.current)?void 0:i.view.state.selection.main.to)||0,u=(null==(a=t.current)?void 0:a.view.state.doc.lineAt(d).from)||0,m=(null==(s=t.current)?void 0:s.view.state.doc.sliceString(u,d))||"",p=/!\[.*\]\(\s*$/.test(m),h=/!\[.*\]\((.*)\s?.*\)/.test(c);if(p){r(e.transformImgUrl(c)),o.preventDefault();return}if(h){let t=c.match(RegExp("(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?[\"']?.*[\"']?\\))","g"));t?Promise.all(t.map(t=>e.transformImgUrl(t))).then(e=>{r(e.reduce((e,l,r)=>e.replace(t[r],l),c))}):r(c),o.preventDefault();return}if(e.autoDetectCode&&o.clipboardData.types.includes("vscode-editor-data")){let e=JSON.parse(o.clipboardData.getData("vscode-editor-data"));n.b.emit(l,n.h,"code",{mode:e.mode,text:o.clipboardData.getData("text/plain")}),o.preventDefault();return}e.maxLength&&c.length+e.modelValue.length>e.maxLength&&n.b.emit(l,n.E,{name:"overlength",message:"The input text is too long",data:c})},[t,l,r,e])},eA=e=>{let{tabWidth:t,editorId:l,theme:r}=(0,o.useContext)(e8),a=(0,o.useRef)(null),p=(0,o.useRef)(),[h]=(0,o.useState)(()=>({language:new u.F6,theme:new u.F6,autocompletion:new u.F6,update:new u.F6,domEvent:new u.F6,history:new u.F6})),[g]=(0,o.useState)(()=>eF(l,e)),f=(0,o.useRef)(!0),b=eR(e,p),[v,x]=(0,o.useState)({}),j=(0,o.useMemo)(()=>{let t={paste:b,blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,input:t=>{e.onInput&&e.onInput(t);let{data:r}=t;e.maxLength&&e.modelValue.length+r.length>e.maxLength&&n.b.emit(l,n.E,{name:"overlength",message:"The input text is too long",data:r})}},r={...t},o=Object.keys(t);for(let e in v){let l=e;o.includes(l)?r[l]=(e,r)=>{v[l](e,r),e.defaultPrevented||t[l](e,r)}:r[l]=v[l]}return r},[v,l,b,e]),[k]=(0,o.useState)(()=>[s.$f.of([...m.wQ,...m.f$,...g,m.oc]),h.history.of((0,m.m8)()),h.language.of((0,d.markdown)({codeLanguages:c.M})),s.tk.lineWrapping,h.update.of(s.tk.updateListener.of(t=>{t.docChanged&&e.onChange(t.state.doc.toString())})),h.domEvent.of(s.tk.domEventHandlers(j))]),[$]=(0,o.useState)(()=>i.h.codeMirrorExtensions(r,[...k,h.theme.of("light"===r?eS:ej),h.autocompletion.of(eH(e.completions))],[...g])),w=(0,o.useCallback)(()=>{var e,t;null==(e=p.current)||e.view.dispatch({effects:h.history.reconfigure([])}),null==(t=p.current)||t.view.dispatch({effects:h.history.reconfigure((0,m.m8)())})},[h.history]);return(0,o.useEffect)(()=>{let r=new s.tk({doc:e.modelValue,parent:a.current,extensions:$}),o=new ed(r);p.current=o,setTimeout(()=>{o.setTabSize(t),o.setDisabled(e.disabled),o.setReadOnly(e.readOnly),e.placeholder&&o.setPlaceholder(e.placeholder),"number"==typeof e.maxLength&&o.setMaxLength(e.maxLength),e.autoFocus&&r.focus(),f.current=!1},0);let i=()=>(0,m.Yw)(r),c=()=>(0,m.KX)(r),d=e=>{x(e)};return n.b.on(l,{name:n.n,callback:i}),n.b.on(l,{name:n.m,callback:c}),n.b.on(l,{name:n.i,callback:d}),()=>{r.destroy(),n.b.remove(l,n.n,i),n.b.remove(l,n.m,c),n.b.remove(l,n.i,d),f.current=!0}},[]),(0,o.useEffect)(()=>{let t=(t,r={})=>{var o,n;if("image"===t&&r.transform){let n=e.transformImgUrl(r.url);if(n instanceof Promise)n.then(e=>{var o;let{text:n,options:i}=es(t,p.current,{...r,url:e});null==(o=p.current)||o.replaceSelectedText(n,i,l)}).catch(e=>{console.error(e)});else{let{text:e,options:i}=es(t,p.current,{...r,url:n});null==(o=p.current)||o.replaceSelectedText(e,i,l)}}else{let{text:e,options:o}=es(t,p.current,r);null==(n=p.current)||n.replaceSelectedText(e,o,l)}};return n.b.on(l,{name:n.h,callback:t}),()=>{n.b.remove(l,n.h,t)}},[l,e]),(0,o.useEffect)(()=>{setTimeout(()=>{var e;null==(e=p.current)||e.view.dispatch({effects:h.theme.reconfigure("light"===r?eS:ej)})},0)},[h.theme,r]),(0,o.useEffect)(()=>{setTimeout(()=>{var t;null==(t=p.current)||t.view.dispatch({effects:[h.update.reconfigure(s.tk.updateListener.of(t=>{t.docChanged&&e.onChange(t.state.doc.toString())})),h.domEvent.reconfigure(s.tk.domEventHandlers(j)),h.autocompletion.reconfigure(eH(e.completions))]})},0)},[h.autocompletion,h.domEvent,h.update,j,e]),(0,o.useEffect)(()=>{var t,l;(null==(t=p.current)?void 0:t.getValue())!==e.modelValue&&(null==(l=p.current)||l.setValue(e.modelValue))},[e.modelValue]),(0,o.useEffect)(()=>{var e;f.current||null==(e=p.current)||e.setTabSize(t)},[t]),(0,o.useEffect)(()=>{var t;f.current||null==(t=p.current)||t.setPlaceholder(e.placeholder)},[e.placeholder]),(0,o.useEffect)(()=>{var t;f.current||null==(t=p.current)||t.setDisabled(e.disabled)},[e.disabled]),(0,o.useEffect)(()=>{var t;f.current||null==(t=p.current)||t.setDisabled(e.readOnly)},[e.readOnly]),(0,o.useEffect)(()=>{var t;f.current||"number"==typeof e.maxLength&&(null==(t=p.current)||t.setMaxLength(e.maxLength))},[e.maxLength]),{inputWrapperRef:a,codeMirrorUt:p,resetHistory:w}},eP=(e,t)=>{let{editorId:l}=(0,o.useContext)(e8);(0,o.useEffect)(()=>e.noImgZoomIn?void 0:(()=>{let e=document.querySelectorAll(`#${l}-preview img`),t=(0,b.Z)(e,{background:"#00000073"});return()=>{t.detach()}})(),[t,e.setting])},eJ=(e,t,l)=>{let{editorId:r,usedLanguageText:n,customIcon:a}=(0,o.useContext)(e8),{formatCopiedText:s=e=>e}=e;(0,o.useEffect)(()=>{e.setting.preview&&document.querySelectorAll(`#${r} .${i.p}-preview .${i.p}-code`).forEach(e=>{let t=-1,l=e.querySelector(`.${i.p}-copy-button`);l&&(l.onclick=r=>{r.preventDefault(),clearTimeout(t);let o=v(s((e.querySelector("input:checked + pre code")||e.querySelector("pre code")).textContent)),{text:i,successTips:a,failTips:c}=n.copyCode;l.innerHTML=o?a:c,t=window.setTimeout(()=>{l.innerHTML=i},1500)})})},[a,s,t,l,e.setting.preview,n.copyCode])},eO=e=>{let{highlight:t}=(0,o.useContext)(e8),l=(0,o.useRef)(i.h.editorExtensions.highlight.instance),[r,n]=(0,o.useState)(!!l.current);return(0,o.useEffect)(()=>{S("link",{...t.css,rel:"stylesheet",id:`${i.p}-hlCss`})},[t.css]),(0,o.useEffect)(()=>{e.noHighlight||l.current||(I("link",{...t.css,rel:"stylesheet",id:`${i.p}-hlCss`}),I("script",{...t.js,id:`${i.p}-hljs`,onload(){l.current=window.hljs,n(!0)}},"hljs"))},[]),{hljsRef:l,hljsInited:r}},e_=e=>{let{theme:t}=(0,o.useContext)(e8),l=(0,o.useRef)(i.h.editorExtensions.mermaid.instance),[r,n]=(0,o.useState)(-1),[s]=(0,o.useState)(()=>new w.z({max:1e3,ttl:6e5})),c=(0,o.useCallback)(()=>{s.clear();let r=l.current;!e.noMermaid&&r&&(r.initialize(i.h.mermaidConfig({startOnLoad:!1,theme:"dark"===t?"dark":"default"})),n(e=>e+1))},[t]);(0,o.useEffect)(c,[c]),(0,o.useEffect)(()=>{var t,r;let{editorExtensions:o,editorExtensionsAttrs:n}=i.h;if(e.noMermaid||l.current)return;let a=o.mermaid.js;/\.mjs/.test(a)?(I("link",{...null==(t=n.mermaid)?void 0:t.js,rel:"modulepreload",href:a,id:`${i.p}-mermaid-m`}),import(a).then(e=>{l.current=e.default,c()})):I("script",{...null==(r=n.mermaid)?void 0:r.js,src:a,id:`${i.p}-mermaid`,onload(){l.current=window.mermaid,c()}},"mermaid")},[]);let d=(0,o.useCallback)(()=>{if(!e.noMermaid&&l.current){let t=document.querySelectorAll(`div.${i.p}-mermaid`),r=document.createElement("div");r.style.width=document.body.offsetWidth+"px",r.style.height=document.body.offsetHeight+"px",r.style.position="fixed",r.style.zIndex="-10000",r.style.top="-10000";let o=t.length;o>0&&document.body.appendChild(r),t.forEach(async t=>{let n=s.get(t.innerText);if(!n){let o=(0,a.Vj)(),i=l.current.renderAsync||l.current.render,c="";try{c=await i(o,t.innerText,r)}catch{}n=await e.sanitizeMermaid("string"==typeof c?c:c.svg),s.set(t.innerText,n)}let c=document.createElement("p");c.className=`${i.p}-mermaid`,c.setAttribute("data-processed",""),c.innerHTML=n,void 0!==t.dataset.line&&(c.dataset.line=t.dataset.line),t.replaceWith(c),0==--o&&r.remove()})}},[]);return{mermaidRef:l,reRender:r,replaceMermaid:d}},eD=e=>{let t=(0,o.useRef)(i.h.editorExtensions.katex.instance),[l,r]=(0,o.useState)(!!t.current);return(0,o.useEffect)(()=>{if(e.noKatex||t.current)return;let{editorExtensions:l}=i.h;I("script",{src:l.katex.js,id:`${i.p}-katex`,onload(){t.current=window.katex,r(!0)}},"katex"),I("link",{rel:"stylesheet",href:l.katex.css,id:`${i.p}-katexCss`})},[]),{katexRef:t,katexInited:l}},eV=(e,t)=>{let l=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(e,r,o,n,a)=>{let s=e[r],c=s.content.trim();if("mermaid"===s.info){let l;return e[r].map&&0===e[r].level&&(l=e[r].map[0],e[r].attrSet("data-line",String(l))),`<div class="${i.p}-mermaid" ${void 0!==l?"data-line="+l:""} data-mermaid-theme=${t.themeRef.current}>${c}</div>`}return l(e,r,o,n,a)}},eB=(e,t)=>{let l=!0,r=!0,o=e.posMax,n=t>0?e.src.charCodeAt(t-1):-1,i=t+1<=o?e.src.charCodeAt(t+1):-1;return(32===n||9===n||i>=48&&i<=57)&&(r=!1),(32===i||9===i)&&(l=!1),{can_open:l,can_close:r}},ez=(e,t)=>{let l,r,o,n;if("$"!==e.src[e.pos])return!1;if(!(o=eB(e,e.pos)).can_open)return t||(e.pending+="$"),e.pos+=1,!0;let i=e.pos+1;for(l=i;-1!==(l=e.src.indexOf("$",l));){for(n=l-1;"\\"===e.src[n];)n-=1;if((l-n)%2==1)break;l+=1}return -1===l?(t||(e.pending+="$"),e.pos=i):l-i==0?(t||(e.pending+="$$"),e.pos=i+1):(o=eB(e,l)).can_close?(t||((r=e.push("math_inline","math",0)).markup="$",r.content=e.src.slice(i,l)),e.pos=l+1):(t||(e.pending+="$"),e.pos=i),!0},eq=(e,t,l,r)=>{let o,n,i,a,s=!1,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(c+2>d||"$$"!==e.src.slice(c,c+2))return!1;if(c+=2,o=e.src.slice(c,d),r)return!0;for("$$"===o.trim().slice(-2)&&(o=o.trim().slice(0,-2),s=!0),i=t;!s&&!(++i>=l||(c=e.bMarks[i]+e.tShift[i],c<(d=e.eMarks[i])&&e.tShift[i]<e.blkIndent));)"$$"===e.src.slice(c,d).trim().slice(-2)&&(a=e.src.slice(0,d).lastIndexOf("$$"),n=e.src.slice(c,a),s=!0);e.line=i+1;let u=e.push("math_block","math",0);return u.block=!0,u.content=(o&&o.trim()?o+`
`:"")+e.getLines(t+1,i,e.tShift[t],!0)+(n&&n.trim()?n:""),u.map=[t,e.line],u.markup="$$",!0},eW=(e,t)=>{let l=e=>{if(!t.katexRef.current)return`<span class="${i.p}-katex-inline">${e}</span>`;{let l=t.katexRef.current.renderToString(e,{throwOnError:!1});return`<span class="${i.p}-katex-inline" data-processed>${l}</span>`}},r=(e,l)=>{if(!t.katexRef.current)return`<p class="${i.p}-katex-block" data-line=${l}>${e}</p>`;{let r=t.katexRef.current.renderToString(e,{throwOnError:!1,displayMode:!0});return`<p class="${i.p}-katex-block" data-line=${l} data-processed>${r}</p>`}};e.inline.ruler.after("escape","math_inline",ez),e.block.ruler.after("blockquote","math_block",eq,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(e,t)=>l(e[t].content),e.renderer.rules.math_block=(e,t)=>r(e[t].content,e[t].map[0])+`
`},eK=(e,t)=>{let l=(t=t||{}).marker||"!",r=l.charCodeAt(0),o=l.length,n="",a="",s=(e,t,l,r,o)=>{let n=e[t];return"admonition_open"===n.type?(e[t].attrPush(["class",`${i.p}-admonition ${i.p}-admonition-${n.info}`]),e[t].attrSet("data-line",String(e[t].map[0]))):"admonition_title_open"===n.type&&e[t].attrPush(["class",`${i.p}-admonition-title`]),o.renderToken(e,t,l)},c=e=>{let t=e.trim().split(" ",2);a="",n=t[0],t.length>1&&(a=e.substring(n.length+2)),""!==a&&a||(a=n)};e.block.ruler.before("code","admonition",(e,t,i,s)=>{let d,u,m,p=!1,h=e.bMarks[t]+e.tShift[t],g=e.eMarks[t];if(r!==e.src.charCodeAt(h))return!1;for(d=h+1;d<=g&&l[(d-h)%o]===e.src[d];d++);let f=Math.floor((d-h)/o);if(3!==f)return!1;d-=(d-h)%o;let b=e.src.slice(h,d);if(c(e.src.slice(d,g)),s)return!0;for(u=t;!(++u>=i||(h=e.bMarks[u]+e.tShift[u],h<(g=e.eMarks[u])&&e.sCount[u]<e.blkIndent));)if(r===e.src.charCodeAt(h)&&!(e.sCount[u]-e.blkIndent>=4)){for(d=h+1;d<=g&&l[(d-h)%o]===e.src[d];d++);if(!(Math.floor((d-h)/o)<f)&&(d-=(d-h)%o,!((d=e.skipSpaces(d))<g))){p=!0;break}}let v=e.parentType,x=e.lineMax;return e.parentType="root",e.lineMax=u,(m=e.push("admonition_open","div",1)).markup=b,m.block=!0,m.info=n,m.map=[t,u],(m=e.push("admonition_title_open","p",1)).markup=b+" "+n,m.map=[t,u],(m=e.push("inline","",0)).content=a,m.map=[t,e.line-1],m.children=[],(m=e.push("admonition_title_close","p",-1)).markup=b+" "+n,e.md.block.tokenize(e,t+1,u),(m=e.push("admonition_close","div",-1)).markup=e.src.slice(h,d),m.block=!0,e.parentType=v,e.lineMax=x,e.line=u+(p?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=s,e.renderer.rules.admonition_title_open=s,e.renderer.rules.admonition_title_close=s,e.renderer.rules.admonition_close=s},eU=(e,t)=>{e.renderer.rules.heading_open=(l,r)=>{var o;let n=l[r],i=(null==(o=l[r+1].children)?void 0:o.reduce((e,t)=>e+(t.content||""),""))||"",a=n.markup.length;return t.headsRef.current.push({text:i,level:a}),n.map&&0===n.level&&(n.attrSet("data-line",String(n.map[0])),n.attrSet("id",t.mdHeadingId(i,a,t.headsRef.current.length))),e.renderer.renderToken(l,r,t)},e.renderer.rules.heading_close=(e,t,l,r,o)=>o.renderToken(e,t,l)},eG=(e,t)=>{let l=e.renderer.rules.fence,r=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/;function n(e){return e.info?r(e.info).trim():""}function a(e){let t=n(e),[l=null,r=""]=(o.exec(t)||[]).slice(1);return[l,r]}function s(e){let t=n(e);return t?t.split(/(\s+)/g)[0]:""}e.renderer.rules.fence=(e,r,n,c,d)=>{var u,m;if(e[r].hidden)return"";let[p]=a(e[r]);if(null===p){let o=e[r].content.trim().split(`
`).length<t.autoFoldThreshold,a=t.codeFoldable?"details":"div",s=t.codeFoldable?"summary":"div",m=l(e,r,n,c,d);return`<${a} class="${i.p}-code"${o?" open":""}>
    <${s} class="${i.p}-code-head">
      <div class="${i.p}-code-flag">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div>
        <span class="${i.p}-code-lang">${e[r].info.trim()}</span>
        <span class="${i.p}-copy-button">${null==(u=t.usedLanguageTextRef.current)?void 0:u.copyCode.text}</span>
      </div>
    </${s}>${m}</${a}>`}let h,g,f,b,v="",x="",j="",k=e[r].content.trim().split(`
`).length<t.autoFoldThreshold,$=t.codeFoldable?"details":"div",w=t.codeFoldable?"summary":"div";for(let u=r;u<e.length&&(h=e[u],[g,f]=a(h),g===p);u++){h.info=h.info.replace(o,""),h.hidden=!0;let a=`${i.p}-codetab-${t.editorId}-${r}-${u-r}`;b=u-r>0?"":"checked",v+=`<li>
          <input type="radio" name="${i.p}-codetab-label-${t.editorId}-${r}" class="${a}" ${b}>
          <label onclick="document.querySelectorAll('.${a}').forEach(e => e.click())">${f||s(h)}</label>
        </li>`,x+=`<input type="radio" name="${i.p}-codetab-pre-${t.editorId}-${r}" class="${a}" ${b}>
      ${l(e,u,n,c,d)}`,j+=`<input type="radio" name="${i.p}-codetab-lang-${t.editorId}-${r}" class="${a}" ${b}>
      <span class=${i.p}-code-lang>${s(h)}</span>`}return`<${$} class="${i.p}-code" ${k?" open":""}>
    <${w} class="${i.p}-code-head">
      <div class="${i.p}-code-flag">
        <ul class="${i.p}-codetab-label">${v}</ul>
      </div>
      <div>
        <span class="${i.p}-codetab-lang">${j}</span>
        <span class="${i.p}-copy-button">${null==(m=t.usedLanguageTextRef.current)?void 0:m.copyCode.text}</span>
      </div>
    </${w}>${x}</${$}>`}},eZ=e=>{["paragraph_open","table_open","ordered_list_open","bullet_list_open","blockquote_open","hr","html_block","fence"].forEach(t=>{let l=e.renderer.rules[t];l?e.renderer.rules[t]=(e,t,r,o,n)=>{let i;let a=l(e,t,r,o,n);return e[t].map&&0===e[t].level&&!/^<!--/.test(a)?(i=e[t].map[0],a.replace(/^(<[^>]*)/,`$1 data-line="${i}"`)):a}:e.renderer.rules[t]=(e,t,l,r,o)=>{let n;return e[t].map&&0===e[t].level&&(n=e[t].map[0],e[t].attrSet("data-line",String(n))),o.renderToken(e,t,l)}})},eY=(e,t)=>{let{onHtmlChanged:l=()=>{},onGetCatalog:r=()=>{}}=e,{editorConfig:s,markdownItConfig:c,markdownItPlugins:d}=i.h,{editorId:u,showCodeRowNumber:m,theme:p,usedLanguageText:h}=(0,o.useContext)(e8),g=(0,o.useRef)([]),f=(0,o.useRef)(p);(0,o.useEffect)(()=>{f.current=p},[p]);let b=(0,o.useRef)(h);(0,o.useEffect)(()=>{b.current=h},[h]);let{hljsRef:v,hljsInited:w}=eO(e),{katexRef:C,katexInited:y}=eD(e),{reRender:T,replaceMermaid:E}=e_(e),[N]=(0,o.useState)(()=>{let t=(0,x.Z)({html:!0,breaks:!0});c(t,{editorId:u});let l=[{type:"image",plugin:j.Z,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:eK,options:{}},{type:"taskList",plugin:k,options:{}},{type:"heading",plugin:eU,options:{mdHeadingId:e.mdHeadingId,headsRef:g}},{type:"code",plugin:eG,options:{editorId:u,usedLanguageTextRef:b,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold}},{type:"xss",plugin:$,options:{xss:e=>({whiteList:Object.assign({},e.getDefaultWhiteList(),{input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]})})}}];e.noKatex||l.push({type:"katex",plugin:eW,options:{katexRef:C}}),e.noMermaid||l.push({type:"mermaid",plugin:eV,options:{themeRef:f}}),d(l,{editorId:u}).forEach(e=>{t.use(e.plugin,e.options)});let r=t.options.highlight;return t.set({highlight:(t,l,o)=>{let a;if(r){let e=r(t,l,o);if(e)return e}a=!e.noHighlight&&v.current?v.current.getLanguage(l)?v.current.highlight(t,{language:l,ignoreIllegals:!0}).value:v.current.highlightAuto(t).value:N.utils.escapeHtml(t);let s=m?(0,n.o)(a.replace(/^\n+|\n+$/g,"")):`<span class="${i.p}-code-block">${a.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${l}" language=${l}>${s}</code></pre>`}}),eZ(t),t}),[I,S]=(0,o.useState)(`_article-key_${(0,a.Vj)()}`),[M,L]=(0,o.useState)(()=>e.sanitize(N.render(e.modelValue))),H=(0,o.useMemo)(()=>(e.noHighlight||w)&&(e.noKatex||y),[w,y]),F=(0,o.useRef)(!0),R=(0,o.useCallback)(()=>{g.current=[],L(e.sanitize(N.render(e.modelValue)))},[N,e]);return(0,o.useEffect)(()=>{n.b.emit(u,n.B,M),l(M),r(g.current),n.b.emit(u,n.p,g.current)},[M,I]),(0,o.useEffect)(()=>{e.setting.preview&&n.b.emit(u,n.p,g.current)},[e.setting.preview]),(0,o.useEffect)(()=>{if(F.current){F.current=!1;return}let e=setTimeout(()=>{R()},t?0:s.renderDelay);return()=>{clearTimeout(e)}},[H,p,R]),(0,o.useEffect)(()=>{E()},[M,T]),(0,o.useEffect)(()=>{n.b.on(u,{name:n.q,callback(){n.b.emit(u,n.p,g.current)}})},[]),(0,o.useEffect)(()=>{let e=()=>{R(),S(`_article-key_${(0,a.Vj)()}`)};return n.b.on(u,{name:n.R,callback:e}),()=>{n.b.remove(u,n.R,e)}},[R]),{html:M,key:I}},eX=(e,t,l)=>{let[r,n]=(0,o.useState)({width:e.inputBoxWitdh}),[a,s]=(0,o.useState)({left:e.inputBoxWitdh}),c=(0,o.useRef)(e.inputBoxWitdh);return(0,o.useEffect)(()=>{var r,o,a,d;let u=(null==(r=t.current)?void 0:r.offsetWidth)||0,m=(null==(o=t.current)?void 0:o.getBoundingClientRect().x)||0,p=t=>{var l;let r=t.x-m;r<i.M?r=i.M:r>u-i.M&&(r=u-i.M);let o=`${r}px`;n(e=>({...e,width:o})),s(e=>({...e,left:o})),c.current=o,null==(l=e.onInputBoxWitdhChange)||l.call(e,o)},h=()=>{s(e=>({...e})),document.addEventListener("mousemove",p)},g=()=>{s(e=>({...e})),document.removeEventListener("mousemove",p)};return null==(a=l.current)||a.addEventListener("mousedown",h),null==(d=l.current)||d.addEventListener("mouseup",g),()=>{var e,t;null==(e=l.current)||e.removeEventListener("mousedown",h),null==(t=l.current)||t.removeEventListener("mouseup",g)}},[t,e,l]),(0,o.useEffect)(()=>{e.inputBoxWitdh&&(n(t=>({...t,width:e.inputBoxWitdh})),s(t=>({...t,left:e.inputBoxWitdh})))},[e.inputBoxWitdh]),(0,o.useEffect)(()=>{let t=e.setting.previewOnly,l="",r="";t?(l="0%",r="none"):e.setting.htmlPreview||e.setting.preview?(l=c.current,r="initial"):(l="100%",r="none"),n(e=>({...e,width:l})),s(e=>({...e,display:r}))},[e.setting.htmlPreview,e.setting.preview,e.setting.previewOnly]),{inputWrapperStyle:r,resizeOperateStyle:a}},eQ=e=>{let{previewOnly:t=!1}=e,{editorId:l,previewTheme:a,showCodeRowNumber:s}=(0,o.useContext)(e8),{html:c,key:d}=eY(e,!!t);eJ(e,c,d),eP(e,c);let u=(0,o.useMemo)(()=>r.j.jsx("div",{id:`${l}-preview`,className:(0,n.c)([`${i.p}-preview`,`${a}-theme`,s&&`${i.p}-scrn`]),dangerouslySetInnerHTML:{__html:c}},d),[l,c,d,a,s]);return r.j.jsxs(r.j.Fragment,{children:[e.setting.preview&&r.j.jsx("div",{id:`${l}-preview-wrapper`,className:`${i.p}-preview-wrapper`,children:u},"content-preview-wrapper"),!t&&e.setting.htmlPreview&&r.j.jsx("div",{id:`${l}-html-wrapper`,className:`${i.p}-preview-wrapper`,children:r.j.jsx("div",{className:`${i.p}-html`,children:c})},"html-preview-wrapper")]})},e0=(0,o.forwardRef)((e,t)=>{let{editorId:l}=(0,o.useContext)(e8),[a,s]=(0,o.useState)(""),c=(0,o.useRef)(null),d=(0,o.useRef)(null),{inputWrapperRef:u,codeMirrorUt:m,resetHistory:p}=eA(e),{inputWrapperStyle:h,resizeOperateStyle:g}=eX(e,c,d);return ea(e,a,m),(0,o.useImperativeHandle)(t,()=>({getSelectedText(){var e;return null==(e=m.current)?void 0:e.getSelectedText()},focus(e){var t;null==(t=m.current)||t.focus(e)},resetHistory:p}),[m,p]),r.j.jsxs("div",{className:`${i.p}-content${e.setting.htmlPreview||e.setting.preview?" has-preview":""}`,ref:c,children:[r.j.jsx("div",{className:`${i.p}-input-wrapper`,style:h,ref:u}),(e.setting.htmlPreview||e.setting.preview)&&r.j.jsx("div",{className:`${i.p}-resize-operate`,style:g,ref:d}),r.j.jsx(eQ,{modelValue:e.modelValue,setting:e.setting,onHtmlChanged:t=>{s(t),e.onHtmlChanged&&e.onHtmlChanged(t)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},"display-editor"),e.catalogVisible&&r.j.jsx(n.M,{theme:e.theme,className:`${i.p}-catalog-editor`,editorId:l,mdHeadingId:e.mdHeadingId},"internal-catalog")]})}),e1=o.memo(e0),e2=({modelValue:e})=>{let{usedLanguageText:t}=(0,o.useContext)(e8);return(0,o.useMemo)(()=>{var l;return r.j.jsxs("div",{className:`${i.p}-footer-item`,children:[r.j.jsx("label",{className:`${i.p}-footer-label`,children:`${null==(l=t.footer)?void 0:l.markdownTotal}:`}),r.j.jsx("span",{children:e.length||0})]})},[t,e])},e3=e=>r.j.jsx("div",{className:(0,n.c)([`${i.p}-checkbox`,e.checked&&`${i.p}-checkbox-checked`]),onClick:()=>{e.onChange(!e.checked)}}),e5=e=>{var t;let{usedLanguageText:l}=(0,o.useContext)(e8);return(0,o.useMemo)(()=>{var t;return r.j.jsxs("div",{className:`${i.p}-footer-item`,children:[r.j.jsx("label",{className:`${i.p}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)},children:null==(t=l.footer)?void 0:t.scrollAuto}),r.j.jsx(e3,{checked:e.scrollAuto,onChange:e.onScrollAutoChange})]})},[null==(t=l.footer)?void 0:t.scrollAuto,e])},e6=o.memo(e=>{let t=(0,o.useCallback)(t=>{if(!i.d.includes(t))return e.defFooters[t]||"";switch(t){case"markdownTotal":return r.j.jsx(e2,{modelValue:e.modelValue},"markdown-total");case"scrollSwitch":return r.j.jsx(e5,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},"scroll-auto")}},[e.modelValue,e.scrollAuto,e.onScrollAutoChange,e.defFooters]),[l,n]=(0,o.useMemo)(()=>{let l=e.footers.indexOf("="),r=-1===l?e.footers:e.footers.slice(0,l),o=-1===l?[]:e.footers.slice(l,Number.MAX_SAFE_INTEGER);return[r.map(e=>t(e)),o.map(e=>t(e))]},[e.footers,t]);return r.j.jsxs("div",{className:`${i.p}-footer`,children:[r.j.jsx("div",{className:`${i.p}-footer-left`,children:l}),r.j.jsx("div",{className:`${i.p}-footer-right`,children:n})]})}),e8=(0,o.createContext)({editorId:"",tabWidth:2,theme:"light",language:"zh-CN",highlight:{css:"",js:""},showCodeRowNumber:!1,usedLanguageText:i.s["zh-CN"],previewTheme:"default",customIcon:{}}),e4=(0,o.forwardRef)((e,t)=>{let{modelValue:l=i.f.modelValue,theme:a=i.f.theme,className:s=i.f.className,toolbars:c=i.f.toolbars,toolbarsExclude:d=i.f.toolbarsExclude,defToolbars:u=i.f.defToolbars,tabWidth:m=i.f.tabWidth,showCodeRowNumber:p=i.f.showCodeRowNumber,previewTheme:h=i.f.previewTheme,noPrettier:g=i.f.noPrettier,tableShape:f=i.f.tableShape,noMermaid:b=i.f.noMermaid,noKatex:v=i.f.noKatex,placeholder:x=i.f.placeholder,onChange:j=i.f.onChange,onHtmlChanged:k=i.f.onHtmlChanged,onGetCatalog:$=i.f.onGetCatalog,sanitize:w=i.f.sanitize,onError:C=i.f.onError,mdHeadingId:y=i.f.mdHeadingId,footers:T=i.f.footers,defFooters:E=i.f.defFooters,noIconfont:N=i.f.noIconfont,noUploadImg:I=i.f.noUploadImg,noHighlight:S=i.f.noHighlight,noImgZoomIn:M=i.f.noImgZoomIn,language:F=i.f.language,inputBoxWitdh:J=i.f.inputBoxWitdh,sanitizeMermaid:D=i.f.sanitizeMermaid,transformImgUrl:V=i.f.transformImgUrl,codeFoldable:B=i.f.codeFoldable,autoFoldThreshold:z=i.f.autoFoldThreshold}=e,[q]=(0,o.useState)(()=>({editorId:e.editorId||(0,n.g)(i.g+"_"),noKatex:v,noMermaid:b,noPrettier:g,noUploadImg:I,noIconfont:N,noHighlight:S})),[W,K]=(0,o.useState)(()=>({scrollAuto:void 0===e.scrollAuto||e.scrollAuto})),U=(0,o.useRef)(),G=(0,o.useCallback)(e=>{K(t=>({...t,scrollAuto:e}))},[K]);L(e,q),H(q),A(e,q),R(q.editorId,C);let Z=P(e,q),[Y,X,Q,ee]=O(e);return _(t,q,Z,Q,ee,U),(0,o.useEffect)(()=>()=>{n.b.clear(q.editorId)},[q.editorId]),r.j.jsx(e8.Provider,{value:{editorId:q.editorId,tabWidth:m,theme:a,language:F,highlight:Y,showCodeRowNumber:p,usedLanguageText:X,previewTheme:h,customIcon:e.customIcon||{}},children:r.j.jsxs("div",{id:q.editorId,className:(0,n.c)([i.p,s,"dark"===a&&`${i.p}-dark`,Q.fullscreen||Q.pageFullscreen?`${i.p}-fullscreen`:""]),style:e.style,children:[c.length>0&&r.j.jsx(er,{noPrettier:q.noPrettier,toolbars:c,toolbarsExclude:d,setting:Q,updateSetting:ee,tableShape:f,defToolbars:u,noUploadImg:q.noUploadImg,showToolbarName:e.showToolbarName}),r.j.jsx(e1,{ref:U,modelValue:l,onChange:j,setting:Q,mdHeadingId:y,onHtmlChanged:k,onGetCatalog:$,sanitize:w,noMermaid:q.noMermaid,noPrettier:q.noPrettier,noHighlight:q.noHighlight,placeholder:x,noKatex:q.noKatex,scrollAuto:W.scrollAuto,formatCopiedText:e.formatCopiedText,autoFocus:e.autoFocus,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,autoDetectCode:e.autoDetectCode,onBlur:e.onBlur,onFocus:e.onFocus,onInput:e.onInput,completions:e.completions,catalogVisible:Z,theme:e.theme,noImgZoomIn:M,onDrop:e.onDrop,inputBoxWitdh:J,onInputBoxWitdhChange:e.onInputBoxWitdhChange,sanitizeMermaid:D,transformImgUrl:V,codeFoldable:B,autoFoldThreshold:z}),T.length>0&&r.j.jsx(e6,{modelValue:l,footers:T,defFooters:E,scrollAuto:W.scrollAuto,onScrollAutoChange:G})]})})})},3062:function(e,t,l){l.d(t,{M:function(){return v},b:function(){return d},d:function(){return u},f:function(){return f},g:function(){return o},h:function(){return b},j:function(){return g},p:function(){return r},s:function(){return m}}),l(9199);let r="md-editor",o="md-editor-rt",n="https://cdnjs.cloudflare.com/ajax/libs",i=`${n}/highlight.js/11.8.0/highlight.min.js`,a={main:`${n}/prettier/2.8.0/standalone.js`,markdown:`${n}/prettier/2.8.0/parser-markdown.js`},s={css:`${n}/cropperjs/1.5.13/cropper.min.css`,js:`${n}/cropperjs/1.5.13/cropper.min.js`},c=`${n}/screenfull.js/5.2.0/screenfull.min.js`,d=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],u=["markdownTotal","=","scrollSwitch"],m={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Img Link",upload:"Upload Img",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},p=`${n}/mermaid/10.6.1/mermaid.esm.min.mjs`,h={js:`${n}/KaTeX/0.16.9/katex.min.js`,css:`${n}/KaTeX/0.16.9/katex.min.css`},g={a11y:{light:`${n}/highlight.js/11.8.0/styles/a11y-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/a11y-dark.min.css`},atom:{light:`${n}/highlight.js/11.8.0/styles/atom-one-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/atom-one-dark.min.css`},github:{light:`${n}/highlight.js/11.8.0/styles/github.min.css`,dark:`${n}/highlight.js/11.8.0/styles/github-dark.min.css`},gradient:{light:`${n}/highlight.js/11.8.0/styles/gradient-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/gradient-dark.min.css`},kimbie:{light:`${n}/highlight.js/11.8.0/styles/kimbie-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/kimbie-dark.min.css`},paraiso:{light:`${n}/highlight.js/11.8.0/styles/paraiso-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${n}/highlight.js/11.8.0/styles/qtcreator-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${n}/highlight.js/11.8.0/styles/stackoverflow-light.min.css`,dark:`${n}/highlight.js/11.8.0/styles/stackoverflow-dark.min.css`}},f={modelValue:"",theme:"light",className:"",onChange:()=>{},onSave:()=>{},pageFullscreen:!1,preview:!0,htmlPreview:!1,language:"zh-CN",toolbars:d,toolbarsExclude:[],noPrettier:!1,onHtmlChanged:()=>{},onGetCatalog:()=>{},tabWidth:2,showCodeRowNumber:!1,previewTheme:"default",mdHeadingId:e=>e,style:{},tableShape:[6,4],noMermaid:!1,sanitize:e=>e,placeholder:"",noKatex:!1,defToolbars:[],onError:()=>{},codeTheme:"atom",footers:u,scrollAuto:!0,defFooters:[],noIconfont:!1,formatCopiedText:e=>e,noUploadImg:!1,codeStyleReverse:!0,codeStyleReverseList:["default","mk-cute"],autoFocus:!1,disabled:!1,readOnly:!1,autoDetectCode:!1,noHighlight:!1,noImgZoomIn:!1,inputBoxWitdh:"50%",sanitizeMermaid:e=>Promise.resolve(e),transformImgUrl:e=>e,codeFoldable:!0,autoFoldThreshold:30},b={editorExtensions:{highlight:{js:i,css:g},prettier:{standaloneJs:a.main,parserMarkdownJs:a.markdown},cropper:{...s},iconfont:"https://at.alicdn.com/t/c/font_2605852_rfu1p40qggh.js",iconfontClass:"https://at.alicdn.com/t/c/font_2605852_rfu1p40qggh.css",screenfull:{js:c},mermaid:{js:p},katex:{...h}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,iconfontType:"svg",mermaidConfig:e=>e},v=170},1282:function(e,t,l){let r,o;l.d(t,{B:function(){return k},C:function(){return p},E:function(){return $},F:function(){return f},H:function(){return x},M:function(){return O},O:function(){return m},P:function(){return g},R:function(){return S},U:function(){return C},a:function(){return b},b:function(){return u},c:function(){return F},d:function(){return v},e:function(){return j},f:function(){return h},g:function(){return A},h:function(){return w},i:function(){return M},j:function(){return P},k:function(){return L},l:function(){return y},m:function(){return E},n:function(){return T},o:function(){return H},p:function(){return N},q:function(){return I}});var n=l(8771),i=l(7294),a=l(3062),s=Object.defineProperty,c=(e,t,l)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,d=(e,t,l)=>(c(e,"symbol"!=typeof t?t+"":t,l),l);let u=new class e{constructor(){d(this,"pools",{})}remove(e,t,l){let r=this.pools[e]&&this.pools[e][t];r&&(this.pools[e][t]=r.filter(e=>e!==l))}clear(e){this.pools[e]={}}on(e,t){return this.pools[e]||(this.pools[e]={}),this.pools[e][t.name]||(this.pools[e][t.name]=[]),this.pools[e][t.name].push(t.callback),this.pools[e][t.name].includes(t.callback)}emit(e,t,...l){this.pools[e]||(this.pools[e]={});let r=this.pools[e][t];r&&r.forEach(e=>{try{e(...l)}catch(e){console.error(`${t} monitor event exception！`,e)}})}},m="onSave",p="changeCatalogVisible",h="changeFullscreen",g="pageFullscreenChanged",f="fullscreenChanged",b="previewChanged",v="previewOnlyChanged",x="htmlPreviewChanged",j="catalogVisibleChanged",k="buildFinished",$="errorCatcher",w="replace",C="uploadImage",y="openModals",T="ctrlZ",E="ctrlShiftZ",N="catalogChanged",I="pushCatalog",S="rerender",M="eventListener",L=(e,t="image.png")=>{let l=e.split(","),r=l[0].match(/:(.*?);/);if(r){let e=r[1],o=atob(l[1]),n=o.length,i=new Uint8Array(n);for(;n--;)i[n]=o.charCodeAt(n);return new File([i],t,{type:e})}return null},H=e=>{if(!e)return e;let t=e.split(`
`),l=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{l.push("<span></span>")}),l.push("</span>"),`<span class="${a.p}-code-block">${e}</span>${l.join("")}`},F=e=>e.filter(e=>!1!==e).join(" "),R=(e,t)=>{if(!e||!t)return 0;let l=null==e?void 0:e.getBoundingClientRect();if(t===document.documentElement)return l.top-t.clientTop;let r=null==t?void 0:t.getBoundingClientRect();return l.top-r.top},A=(r=0,e=>e+ ++r),P=(o=0,()=>++o),J=({tocItem:e,mdHeadingId:t,scrollElement:l,onClick:r,scrollElementOffsetTop:o=0})=>n.j.jsxs("div",{className:F([`${a.p}-catalog-link`,e.active&&`${a.p}-catalog-active`]),onClick:n=>{r&&r(n,e),n.stopPropagation();let i=t(e.text,e.level,e.index),a=document.getElementById(i),s=l instanceof Element?l:document.querySelector(l);if(a&&s){let e=a.offsetParent,t=a.offsetTop;if(s.contains(e))for(;e&&s!=e;)t+=null==e?void 0:e.offsetTop,e=null==e?void 0:e.offsetParent;null==s||s.scrollTo({top:t-o,behavior:"smooth"})}},children:[n.j.jsx("span",{title:e.text,children:e.text}),n.j.jsx("div",{className:`${a.p}-catalog-wrapper`,children:e.children&&e.children.map(e=>n.j.jsx(J,{mdHeadingId:t,tocItem:e,scrollElement:l,onClick:r,scrollElementOffsetTop:o},`${e.text}-${e.index}`))})]}),O=i.memo(e=>{let{editorId:t,mdHeadingId:l=a.f.mdHeadingId,theme:r="light",offsetTop:o=20}=e,[s,c]=(0,i.useState)([]),[d,m]=(0,i.useState)(),p=(0,i.useMemo)(()=>{let e=[];return s.forEach((t,l)=>{let{text:r,level:o}=t,n={level:o,text:r,index:l+1,active:d===t};if(0===e.length)e.push(n);else{let t=e[e.length-1];if(n.level>t.level)for(let e=t.level+1;e<=6;e++){let{children:e}=t;if(!e){t.children=[n];break}if(t=e[e.length-1],n.level<=t.level){e.push(n);break}}else e.push(n)}}),e},[d,s]),[h]=(0,i.useState)(()=>e.scrollElement||`#${t}-preview-wrapper`),g=(0,i.useCallback)(()=>h instanceof HTMLElement?h:document.querySelector(h),[h]);return(0,i.useEffect)(()=>{let e=[],r=t=>{if(0===t.length)return c([]),!1;let{activeHead:r}=t.reduce((e,t,r)=>{let n=document.getElementById(l(t.text,t.level,r+1));if(n instanceof HTMLElement){let l=R(n,g());if(l<o&&l>e.minTop)return{activeHead:t,minTop:l}}return e},{activeHead:t[0],minTop:Number.MIN_SAFE_INTEGER});m(r),c(t),e=t},n=window,i=()=>{let e=g();n=e===document.documentElement?window:e},a=()=>{r(e)},s=e=>{null==n||n.removeEventListener("scroll",a),r(e),i(),null==n||n.addEventListener("scroll",a)};return u.on(t,{name:N,callback:s}),u.emit(t,I),i(),null==n||n.addEventListener("scroll",a),()=>{u.remove(t,N,s),null==n||n.removeEventListener("scroll",a)}},[o,l,g]),(0,i.useEffect)(()=>{e.onActive&&e.onActive(d)},[d,e]),n.j.jsx("div",{className:`${a.p}-catalog${"dark"===r?"-dark":""} ${e.className||""} `,style:e.style,children:p.map(t=>n.j.jsx(J,{mdHeadingId:l,tocItem:t,scrollElement:h,onClick:e.onClick,scrollElementOffsetTop:e.scrollElementOffsetTop},`${t.text}-${t.index}`))})})},8771:function(e,t,l){l.d(t,{j:function(){return m}});var r=l(7294),o={exports:{}},n={},i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,l){var r,o={},n=null,a=null;for(r in void 0!==l&&(n=""+l),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(a=t.ref),t)s.call(t,r)&&!d.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:n,ref:a,props:o,_owner:c.current}}n.Fragment=a,n.jsx=u,n.jsxs=u,o.exports=n;var m=o.exports}}]);
"use strict";(self.webpackChunkndzy_antd=self.webpackChunkndzy_antd||[]).push([["1402"],{8551:function(e,t,n){n.r(t),n.d(t,{commonmarkLanguage:function(){return g},deleteMarkupBackward:function(){return y},insertNewlineContinueMarkup:function(){return I},markdown:function(){return T},markdownKeymap:function(){return v},markdownLanguage:function(){return k}});var r=n(9348),o=n(1518),l=n(3015),i=n(3582),f=n(6533),s=n(9155),u=n(1171);let a=(0,l.kU)({commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}}}),m=new u.md,c=f.E2.configure({props:[l.x0.add(e=>!e.is("Block")||e.is("Document")||null!=h(e)||function(e){return"OrderedList"==e.name||"BulletList"==e.name}(e)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),m.add(h),l.uj.add({Document:()=>null}),l.pp.add({Document:a})]});function h(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}let d=l.rs.of((e,t,n)=>{for(let r=(0,l.qz)(e).resolveInner(n,-1);r&&!(r.from<t);r=r.parent){let e=r.type.prop(m);if(null==e)continue;let t=function(e,t){let n=e;for(;;){let e=n.nextSibling,r;if(!e||null!=(r=h(e.type))&&r<=t)break;n=e}return n.to}(r,e);if(t>n)return{from:n,to:t}}return null});function p(e){return new l.SQ(a,e,[d],"markdown")}let g=p(c),k=p(c.configure([f.z7,f.ar,f.$2,f.dy,{props:[l.x0.add({Table:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}]));class x{constructor(e,t,n,r,o,l,i){this.node=e,this.from=t,this.to=n,this.spaceBefore=r,this.spaceAfter=o,this.type=l,this.item=i}blank(e,t=!0){let n=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;n.length<e;)n+=" ";return n}for(let e=this.to-this.from-n.length-this.spaceAfter.length;e>0;e--)n+=" ";return n+(t?this.spaceAfter:"")}marker(e,t){let n="OrderedList"==this.node.name?String(+L(this.item,e)[2]+t):"";return this.spaceBefore+n+this.type+this.spaceAfter}}function B(e,t){let n=[];for(let t=e;t&&"Document"!=t.name;t=t.parent)("ListItem"==t.name||"Blockquote"==t.name||"FencedCode"==t.name)&&n.push(t);let r=[];for(let e=n.length-1;e>=0;e--){let o=n[e],l,i=t.lineAt(o.from),f=o.from-i.from;if("FencedCode"==o.name)r.push(new x(o,f,f,"","","",null));else if("Blockquote"==o.name&&(l=/^ *>( ?)/.exec(i.text.slice(f))))r.push(new x(o,f,f+l[0].length,"",l[1],">",null));else if("ListItem"==o.name&&"OrderedList"==o.parent.name&&(l=/^( *)\d+([.)])( *)/.exec(i.text.slice(f)))){let e=l[3],t=l[0].length;e.length>=4&&(e=e.slice(0,e.length-4),t-=4),r.push(new x(o.parent,f,f+t,l[1],e,l[2],o))}else if("ListItem"==o.name&&"BulletList"==o.parent.name&&(l=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(i.text.slice(f)))){let e=l[4],t=l[0].length;e.length>4&&(e=e.slice(0,e.length-4),t-=4);let n=l[2];l[3]&&(n+=l[3].replace(/[xX]/," ")),r.push(new x(o.parent,f,f+t,l[1],e,n,o))}}return r}function L(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function w(e,t,n,r=0){for(let o=-1,l=e;;){if("ListItem"==l.name){let e=L(l,t),i=+e[2];if(o>=0){if(i!=o+1)return;n.push({from:l.from+e[1].length,to:l.from+e[0].length,insert:String(o+2+r)})}o=i}let e=l.nextSibling;if(!e)break;l=e}}function A(e,t){let n=/^[ \t]*/.exec(e)[0].length;if(!n||"	"!=t.facet(l.c))return e;let o=(0,r.IS)(e,4,n),i="";for(let e=o;e>0;)e>=4?(i+="	",e-=4):(i+=" ",e--);return i+e.slice(n)}let I=({state:e,dispatch:t})=>{let n=(0,l.qz)(e),{doc:o}=e,i=null,f=e.changeByRange(t=>{if(!t.empty||!k.isActiveAt(e,t.from))return i={range:t};let l=t.from,f=o.lineAt(l),s=B(n.resolveInner(l,-1),o);for(;s.length&&s[s.length-1].from>l-f.from;)s.pop();if(!s.length)return i={range:t};let u=s[s.length-1];if(u.to-u.spaceAfter.length>l-f.from)return i={range:t};let a=l>=u.to-u.spaceAfter.length&&!/\S/.test(f.text.slice(u.to));if(u.item&&a){let t=u.node.firstChild,n=u.node.getChild("ListItem","ListItem");if(t.to>=l||n&&n.to<l||f.from>0&&!/[^\s>]/.test(o.lineAt(f.from-1).text)){let e=s.length>1?s[s.length-2]:null,t,n="";e&&e.item?(t=f.from+e.from,n=e.marker(o,1)):t=f.from+(e?e.to:0);let i=[{from:t,to:l,insert:n}];return"OrderedList"==u.node.name&&w(u.item,o,i,-2),e&&"OrderedList"==e.node.name&&w(e.item,o,i),{range:r.jT.cursor(t+n.length),changes:i}}{let t=S(s,e,f);return{range:r.jT.cursor(l+t.length+1),changes:{from:f.from,insert:t+e.lineBreak}}}}if("Blockquote"==u.node.name&&a&&f.from){let n=o.lineAt(f.from-1),r=/>\s*$/.exec(n.text);if(r&&r.index==u.from){let o=e.changes([{from:n.from+r.index,to:n.to},{from:f.from+u.from,to:f.to}]);return{range:t.map(o),changes:o}}}let m=[];"OrderedList"==u.node.name&&w(u.item,o,m);let c=u.item&&u.item.from<f.from,h="";if(!c||/^[\s\d.)\-+*>]*/.exec(f.text)[0].length>=u.to)for(let e=0,t=s.length-1;e<=t;e++)h+=e!=t||c?s[e].blank(e<t?(0,r.IS)(f.text,4,s[e+1].from)-h.length:null):s[e].marker(o,1);let d=l;for(;d>f.from&&/\s/.test(f.text.charAt(d-f.from-1));)d--;return h=A(h,e),function(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;let n=e.firstChild,r=e.getChild("ListItem","ListItem");if(!r)return!1;let o=t.lineAt(n.to),l=t.lineAt(r.from),i=/^[\s>]*$/.test(o.text);return o.number+(i?0:1)<l.number}(u.node,e.doc)&&(h=S(s,e,f)+e.lineBreak+h),m.push({from:d,to:l,insert:e.lineBreak+h}),{range:r.jT.cursor(d+h.length+1),changes:m}});return!i&&(t(e.update(f,{scrollIntoView:!0,userEvent:"input"})),!0)};function b(e){return"QuoteMark"==e.name||"ListMark"==e.name}function S(e,t,n){let o="";for(let t=0,l=e.length-2;t<=l;t++)o+=e[t].blank(t<l?(0,r.IS)(n.text,4,e[t+1].from)-o.length:null,t<l);return A(o,t)}let y=({state:e,dispatch:t})=>{let n=(0,l.qz)(e),o=null,i=e.changeByRange(t=>{let l=t.from,{doc:i}=e;if(t.empty&&k.isActiveAt(e,t.from)){let t=i.lineAt(l),o=B(function(e,t){let n=e.resolveInner(t,-1),r=t;b(n)&&(r=n.from,n=n.parent);for(let e;e=n.childBefore(r);)if(b(e))r=e.from;else if("OrderedList"==e.name||"BulletList"==e.name)r=(n=e.lastChild).to;else break;return n}(n,l),i);if(o.length){let n=o[o.length-1],i=n.to-n.spaceAfter.length+(n.spaceAfter?1:0);if(l-t.from>i&&!/\S/.test(t.text.slice(i,l-t.from)))return{range:r.jT.cursor(t.from+i),changes:{from:t.from+i,to:l}};if(l-t.from==i&&(!n.item||t.from<=n.item.from||!/\S/.test(t.text.slice(0,n.to)))){let o=t.from+n.from;if(n.item&&n.node.from<n.item.from&&/\S/.test(t.text.slice(n.from,n.to))){let l=n.blank((0,r.IS)(t.text,4,n.to)-(0,r.IS)(t.text,4,n.from));return o==t.from&&(l=A(l,e)),{range:r.jT.cursor(o+l.length),changes:{from:o,to:t.from+n.to,insert:l}}}if(o<l)return{range:r.jT.cursor(o),changes:{from:o,to:l}}}}}return o={range:t}});return!o&&(t(e.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},v=[{key:"Enter",run:I},{key:"Backspace",run:y}],C=(0,s.html)({matchClosingTags:!1});function T(e={}){var t,n;let{codeLanguages:i,defaultCodeLanguage:s,addKeymap:u=!0,base:{parser:a}=g,completeHTMLTags:m=!0,htmlTagLanguage:c=C}=e;if(!(a instanceof f.xj))throw RangeError("Base parser provided to `markdown` should be a Markdown parser");let h=e.extensions?[e.extensions]:[],d=[c.support],k;s instanceof l.ri?(d.push(s.support),k=s.language):s&&(k=s);let x=i||k?(t=i,n=k,e=>{if(e&&t){let n=null;if(e=/\S*/.exec(e)[0],(n="function"==typeof t?t(e):l.c6.matchLanguageName(t,e,!0))instanceof l.c6)return n.support?n.support.language.parser:l.Be.getSkippingParser(n.load());if(n)return n.parser}return n?n.parser:null}):void 0;h.push((0,f.zY)({codeParser:x,htmlParser:c.language.parser})),u&&d.push(r.Wl.high(o.$f.of(v)));let B=p(a.configure(h));return m&&d.push(B.data.of({autocomplete:j})),new l.ri(B,d)}function j(e){let{state:t,pos:n}=e,o=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(n-25,n));if(!o)return null;let f=(0,l.qz)(t).resolveInner(n,-1);for(;f&&!f.type.isTop;){if("CodeBlock"==f.name||"FencedCode"==f.name||"ProcessingInstructionBlock"==f.name||"CommentBlock"==f.name||"Link"==f.name||"Image"==f.name)return null;f=f.parent}return{from:n-o[0].length,to:n,options:function(){if(q)return q;let e=(0,s.htmlCompletionSource)(new i.TK(r.yy.create({extensions:C}),0,!0));return q=e?e.options:[]}(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let q=null}}]);